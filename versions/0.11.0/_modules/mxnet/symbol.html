<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="mxnet.symbol" property="og:title">
<meta content="https://raw.githubusercontent.com/dmlc/web-data/master/mxnet/image/og-logo.png" property="og:image">
<meta content="https://raw.githubusercontent.com/dmlc/web-data/master/mxnet/image/og-logo.png" property="og:image:secure_url">
<meta content="mxnet.symbol" property="og:description"/>
<title>mxnet.symbol — mxnet  documentation</title>
<link crossorigin="anonymous" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" rel="stylesheet"/>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet"/>
<link href="../../_static/basic.css" rel="stylesheet" type="text/css">
<link href="../../_static/pygments.css" rel="stylesheet" type="text/css">
<link href="../../_static/mxnet.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
<script src="https://code.jquery.com/jquery-1.11.1.min.js" type="text/javascript"></script>
<script src="../../_static/underscore.js" type="text/javascript"></script>
<script src="../../_static/searchtools_custom.js" type="text/javascript"></script>
<script src="../../_static/doctools.js" type="text/javascript"></script>
<script src="../../_static/selectlang.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
<script type="text/javascript"> jQuery(function() { Search.loadIndex("/versions/0.11.0/searchindex.js"); Search.init();}); </script>
<script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
      Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-96378503-1', 'auto');
      ga('send', 'pageview');

    </script>
<!-- -->
<!-- <script type="text/javascript" src="../../_static/jquery.js"></script> -->
<!-- -->
<!-- <script type="text/javascript" src="../../_static/underscore.js"></script> -->
<!-- -->
<!-- <script type="text/javascript" src="../../_static/doctools.js"></script> -->
<!-- -->
<!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> -->
<!-- -->
<link href="../../genindex.html" rel="index" title="Index">
<link href="../../search.html" rel="search" title="Search"/>
<link href="../index.html" rel="up" title="Module code"/>
<link href="https://raw.githubusercontent.com/dmlc/web-data/master/mxnet/image/mxnet-icon.png" rel="icon" type="image/png"/>
</link></link></link></meta></meta></meta></head>
<body background="https://raw.githubusercontent.com/dmlc/web-data/master/mxnet/image/mxnet-background-compressed.jpeg" role="document">
<div class="content-block"><div class="navbar navbar-fixed-top">
<div class="container" id="navContainer">
<div class="innder" id="header-inner">
<h1 id="logo-wrap">
<a href="../../" id="logo"><img src="https://raw.githubusercontent.com/dmlc/web-data/master/mxnet/image/mxnet_logo.png"/></a>
</h1>
<nav class="nav-bar" id="main-nav">
<a class="main-nav-link" href="/versions/0.11.0/get_started/install.html">Install</a>
<span id="dropdown-menu-position-anchor">
<a aria-expanded="true" aria-haspopup="true" class="main-nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button">Gluon <span class="caret"></span></a>
<ul class="dropdown-menu navbar-menu" id="package-dropdown-menu">
<li><a class="main-nav-link" href="/versions/0.11.0/tutorials/gluon/gluon.html">About</a></li>
<li><a class="main-nav-link" href="https://www.d2l.ai/">Dive into Deep Learning</a></li>
<li><a class="main-nav-link" href="https://gluon-cv.mxnet.io">GluonCV Toolkit</a></li>
<li><a class="main-nav-link" href="https://gluon-nlp.mxnet.io/">GluonNLP Toolkit</a></li>
</ul>
</span>
<span id="dropdown-menu-position-anchor">
<a aria-expanded="true" aria-haspopup="true" class="main-nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button">API <span class="caret"></span></a>
<ul class="dropdown-menu navbar-menu" id="package-dropdown-menu">
<li><a class="main-nav-link" href="/versions/0.11.0/api/python/index.html">Python</a></li>
<li><a class="main-nav-link" href="/versions/0.11.0/api/c++/index.html">C++</a></li>
<li><a class="main-nav-link" href="/versions/0.11.0/api/julia/index.html">Julia</a></li>
<li><a class="main-nav-link" href="/versions/0.11.0/api/perl/index.html">Perl</a></li>
<li><a class="main-nav-link" href="/versions/0.11.0/api/r/index.html">R</a></li>
<li><a class="main-nav-link" href="/versions/0.11.0/api/scala/index.html">Scala</a></li>
</ul>
</span>
<span id="dropdown-menu-position-anchor-docs">
<a aria-expanded="true" aria-haspopup="true" class="main-nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button">Docs <span class="caret"></span></a>
<ul class="dropdown-menu navbar-menu" id="package-dropdown-menu-docs">
<li><a class="main-nav-link" href="/versions/0.11.0/how_to/faq.html">FAQ</a></li>
<li><a class="main-nav-link" href="/versions/0.11.0/tutorials/index.html">Tutorials</a>
<li><a class="main-nav-link" href="https://github.com/apache/incubator-mxnet/tree/v0.11.0/example">Examples</a></li>
<li><a class="main-nav-link" href="/versions/0.11.0/architecture/index.html">Architecture</a></li>
<li><a class="main-nav-link" href="https://cwiki.apache.org/confluence/display/MXNET/Apache+MXNet+Home">Developer Wiki</a></li>
<li><a class="main-nav-link" href="/versions/0.11.0/model_zoo/index.html">Model Zoo</a></li>
<li><a class="main-nav-link" href="https://github.com/onnx/onnx-mxnet">ONNX</a></li>
</li></ul>
</span>
<span id="dropdown-menu-position-anchor-community">
<a aria-expanded="true" aria-haspopup="true" class="main-nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button">Community <span class="caret"></span></a>
<ul class="dropdown-menu navbar-menu" id="package-dropdown-menu-community">
<li><a class="main-nav-link" href="http://discuss.mxnet.io">Forum</a></li>
<li><a class="main-nav-link" href="https://github.com/apache/incubator-mxnet/tree/v0.11.0">Github</a></li>
<li><a class="main-nav-link" href="/versions/0.11.0/community/contribute.html">Contribute</a></li>
</ul>
</span>
<span id="dropdown-menu-position-anchor-version" style="position: relative"><a href="#" class="main-nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">0.11.0<span class="caret"></span></a><ul id="package-dropdown-menu" class="dropdown-menu"><li><a href="/">master</a></li><li><a href=/versions/1.6/>1.6</a></li><li><a href=/versions/1.5.0/>1.5.0</a></li><li><a href=/versions/1.4.1/>1.4.1</a></li><li><a href=/versions/1.3.1/>1.3.1</a></li><li><a href=/versions/1.2.1/>1.2.1</a></li><li><a href=/versions/1.1.0/>1.1.0</a></li><li><a href=/versions/1.0.0/>1.0.0</a></li><li><a href=/versions/0.12.1/>0.12.1</a></li><li><a href=/versions/0.11.0/>0.11.0</a></li></ul></span></nav>
<script> function getRootPath(){ return "../../" } </script>
<div class="burgerIcon dropdown">
<a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button">☰</a>
<ul class="dropdown-menu" id="burgerMenu">
<li><a href="/versions/0.11.0/get_started/install.html">Install</a></li>
<li><a class="main-nav-link" href="/versions/0.11.0/tutorials/index.html">Tutorials</a></li>
<li class="dropdown-submenu dropdown">
<a aria-expanded="true" aria-haspopup="true" class="dropdown-toggle burger-link" data-toggle="dropdown" href="#" tabindex="-1">Gluon</a>
<ul class="dropdown-menu navbar-menu" id="package-dropdown-menu">
<li><a class="main-nav-link" href="/versions/0.11.0/tutorials/gluon/gluon.html">About</a></li>
<li><a class="main-nav-link" href="http://gluon.mxnet.io">The Straight Dope (Tutorials)</a></li>
<li><a class="main-nav-link" href="https://gluon-cv.mxnet.io">GluonCV Toolkit</a></li>
<li><a class="main-nav-link" href="https://gluon-nlp.mxnet.io/">GluonNLP Toolkit</a></li>
</ul>
</li>
<li class="dropdown-submenu">
<a aria-expanded="true" aria-haspopup="true" class="dropdown-toggle burger-link" data-toggle="dropdown" href="#" tabindex="-1">API</a>
<ul class="dropdown-menu">
<li><a class="main-nav-link" href="/versions/0.11.0/api/python/index.html">Python</a></li>
<li><a class="main-nav-link" href="/versions/0.11.0/api/c++/index.html">C++</a></li>
<li><a class="main-nav-link" href="/versions/0.11.0/api/julia/index.html">Julia</a></li>
<li><a class="main-nav-link" href="/versions/0.11.0/api/perl/index.html">Perl</a></li>
<li><a class="main-nav-link" href="/versions/0.11.0/api/r/index.html">R</a></li>
<li><a class="main-nav-link" href="/versions/0.11.0/api/scala/index.html">Scala</a></li>
</ul>
</li>
<li class="dropdown-submenu">
<a aria-expanded="true" aria-haspopup="true" class="dropdown-toggle burger-link" data-toggle="dropdown" href="#" tabindex="-1">Docs</a>
<ul class="dropdown-menu">
<li><a href="/versions/0.11.0/how_to/faq.html" tabindex="-1">FAQ</a></li>
<li><a href="/versions/0.11.0/tutorials/index.html" tabindex="-1">Tutorials</a></li>
<li><a href="https://github.com/apache/incubator-mxnet/tree/v0.11.0/example" tabindex="-1">Examples</a></li>
<li><a href="/versions/0.11.0/architecture/index.html" tabindex="-1">Architecture</a></li>
<li><a href="https://cwiki.apache.org/confluence/display/MXNET/Apache+MXNet+Home" tabindex="-1">Developer Wiki</a></li>
<li><a href="/versions/0.11.0/model_zoo/index.html" tabindex="-1">Gluon Model Zoo</a></li>
<li><a href="https://github.com/onnx/onnx-mxnet" tabindex="-1">ONNX</a></li>
</ul>
</li>
<li class="dropdown-submenu dropdown">
<a aria-haspopup="true" class="dropdown-toggle burger-link" data-toggle="dropdown" href="#" role="button" tabindex="-1">Community</a>
<ul class="dropdown-menu">
<li><a href="http://discuss.mxnet.io" tabindex="-1">Forum</a></li>
<li><a href="https://github.com/apache/incubator-mxnet/tree/v0.11.0" tabindex="-1">Github</a></li>
<li><a href="/versions/0.11.0/community/contribute.html" tabindex="-1">Contribute</a></li>
</ul>
</li>
<li id="dropdown-menu-position-anchor-version-mobile" class="dropdown-submenu" style="position: relative"><a href="#" tabindex="-1">0.11.0</a><ul class="dropdown-menu"><li><a tabindex="-1" href=/>master</a></li><li><a tabindex="-1" href=/versions/1.6/>1.6</a></li><li><a tabindex="-1" href=/versions/1.5.0/>1.5.0</a></li><li><a tabindex="-1" href=/versions/1.4.1/>1.4.1</a></li><li><a tabindex="-1" href=/versions/1.3.1/>1.3.1</a></li><li><a tabindex="-1" href=/versions/1.2.1/>1.2.1</a></li><li><a tabindex="-1" href=/versions/1.1.0/>1.1.0</a></li><li><a tabindex="-1" href=/versions/1.0.0/>1.0.0</a></li><li><a tabindex="-1" href=/versions/0.12.1/>0.12.1</a></li><li><a tabindex="-1" href=/versions/0.11.0/>0.11.0</a></li></ul></li></ul>
</div>
<div class="plusIcon dropdown">
<a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button"><span aria-hidden="true" class="glyphicon glyphicon-plus"></span></a>
<ul class="dropdown-menu dropdown-menu-right" id="plusMenu"></ul>
</div>
<div id="search-input-wrap">
<form action="../../search.html" autocomplete="off" class="" method="get" role="search">
<div class="form-group inner-addon left-addon">
<i class="glyphicon glyphicon-search"></i>
<input class="form-control" name="q" placeholder="Search" type="text"/>
</div>
<input name="check_keywords" type="hidden" value="yes">
<input name="area" type="hidden" value="default"/>
</input></form>
<div id="search-preview"></div>
</div>
<div id="searchIcon">
<span aria-hidden="true" class="glyphicon glyphicon-search"></span>
</div>
<!-- <div id="lang-select-wrap"> -->
<!--   <label id="lang-select-label"> -->
<!--     <\!-- <i class="fa fa-globe"></i> -\-> -->
<!--     <span></span> -->
<!--   </label> -->
<!--   <select id="lang-select"> -->
<!--     <option value="en">Eng</option> -->
<!--     <option value="zh">中文</option> -->
<!--   </select> -->
<!-- </div> -->
<!--     <a id="mobile-nav-toggle">
        <span class="mobile-nav-toggle-bar"></span>
        <span class="mobile-nav-toggle-bar"></span>
        <span class="mobile-nav-toggle-bar"></span>
      </a> -->
</div>
</div>
</div>
<script type="text/javascript">
        $('body').css('background', 'white');
    </script>
<div class="container">
<div class="row">
<div aria-label="main navigation" class="sphinxsidebar leftsidebar" role="navigation">
<div class="sphinxsidebarwrapper">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/python/index.html">Python Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/r/index.html">R Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/julia/index.html">Julia Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/c++/index.html">C++ Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/scala/index.html">Scala Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/perl/index.html">Perl Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how_to/index.html">HowTo Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/index.html">System Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>
</div>
</div>
<div class="content">
<div class="page-tracker"></div>
<h1>Source code for mxnet.symbol</h1><div class="highlight"><pre>
<span></span><span class="c1"># Licensed to the Apache Software Foundation (ASF) under one</span>
<span class="c1"># or more contributor license agreements.  See the NOTICE file</span>
<span class="c1"># distributed with this work for additional information</span>
<span class="c1"># regarding copyright ownership.  The ASF licenses this file</span>
<span class="c1"># to you under the Apache License, Version 2.0 (the</span>
<span class="c1"># "License"); you may not use this file except in compliance</span>
<span class="c1"># with the License.  You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#   http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing,</span>
<span class="c1"># software distributed under the License is distributed on an</span>
<span class="c1"># "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span>
<span class="c1"># KIND, either express or implied.  See the License for the</span>
<span class="c1"># specific language governing permissions and limitations</span>
<span class="c1"># under the License.</span>

<span class="c1"># coding: utf-8</span>
<span class="c1"># pylint: disable=invalid-name, protected-access, too-many-arguments, too-many-lines</span>
<span class="c1"># pylint: disable=import-error, no-name-in-module</span>
<span class="sd">"""Symbolic configuration API of MXNet."""</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">absolute_import</span> <span class="k">as</span> <span class="n">_abs</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">__builtin__</span> <span class="k">import</span> <span class="nb">slice</span> <span class="k">as</span> <span class="n">py_slice</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">builtins</span> <span class="k">import</span> <span class="nb">slice</span> <span class="k">as</span> <span class="n">py_slice</span>

<span class="kn">import</span> <span class="nn">ctypes</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">numbers</span> <span class="k">import</span> <span class="n">Number</span>

<span class="kn">import</span> <span class="nn">os</span> <span class="k">as</span> <span class="nn">_os</span>
<span class="kn">import</span> <span class="nn">sys</span> <span class="k">as</span> <span class="nn">_sys</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">_numpy</span>

<span class="kn">from</span> <span class="nn">.base</span> <span class="k">import</span> <span class="n">_LIB</span><span class="p">,</span> <span class="n">numeric_types</span>
<span class="kn">from</span> <span class="nn">.base</span> <span class="k">import</span> <span class="n">c_array</span><span class="p">,</span> <span class="n">c_str</span><span class="p">,</span> <span class="n">mx_uint</span><span class="p">,</span> <span class="n">py_str</span><span class="p">,</span> <span class="n">string_types</span>
<span class="kn">from</span> <span class="nn">.base</span> <span class="k">import</span> <span class="n">NDArrayHandle</span><span class="p">,</span> <span class="n">ExecutorHandle</span><span class="p">,</span> <span class="n">SymbolHandle</span><span class="p">,</span> <span class="n">OpHandle</span>
<span class="kn">from</span> <span class="nn">.base</span> <span class="k">import</span> <span class="n">check_call</span><span class="p">,</span> <span class="n">MXNetError</span><span class="p">,</span> <span class="n">NotImplementedForSymbol</span><span class="p">,</span> <span class="n">_Null</span>  <span class="c1"># pylint: disable=unused-import</span>
<span class="kn">from</span> <span class="nn">.context</span> <span class="k">import</span> <span class="n">Context</span>
<span class="kn">from</span> <span class="nn">.ndarray</span> <span class="k">import</span> <span class="n">NDArray</span><span class="p">,</span> <span class="n">_DTYPE_NP_TO_MX</span><span class="p">,</span> <span class="n">_DTYPE_MX_TO_NP</span><span class="p">,</span> <span class="n">_GRAD_REQ_MAP</span>
<span class="kn">from</span> <span class="nn">.name</span> <span class="k">import</span> <span class="n">NameManager</span>  <span class="c1"># pylint: disable=unused-import</span>
<span class="kn">from</span> <span class="nn">.executor</span> <span class="k">import</span> <span class="n">Executor</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">_symbol_internal</span> <span class="k">as</span> <span class="n">_internal</span>
<span class="kn">from</span> <span class="nn">.attribute</span> <span class="k">import</span> <span class="n">AttrScope</span>
<span class="kn">from</span> <span class="nn">.symbol_doc</span> <span class="k">import</span> <span class="n">_build_doc</span>

<span class="c1"># Use different version of SymbolBase</span>
<span class="c1"># When possible, use cython to speedup part of computation.</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">_os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"MXNET_ENABLE_CYTHON"</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">._ctypes.symbol</span> <span class="k">import</span> <span class="n">SymbolBase</span><span class="p">,</span> <span class="n">_set_symbol_class</span>
        <span class="kn">from</span> <span class="nn">._ctypes.symbol</span> <span class="k">import</span> <span class="n">_symbol_creator</span>  <span class="c1"># pylint: disable=unused-import</span>
    <span class="k">elif</span> <span class="n">_sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">>=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">._cy3.symbol</span> <span class="k">import</span> <span class="n">SymbolBase</span><span class="p">,</span> <span class="n">_set_symbol_class</span>
        <span class="kn">from</span> <span class="nn">._cy3.symbol</span> <span class="k">import</span> <span class="n">_symbol_creator</span>  <span class="c1"># pylint: disable=unused-import</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">._cy2.symbol</span> <span class="k">import</span> <span class="n">SymbolBase</span><span class="p">,</span> <span class="n">_set_symbol_class</span>
        <span class="kn">from</span> <span class="nn">._cy2.symbol</span> <span class="k">import</span> <span class="n">_symbol_creator</span>  <span class="c1"># pylint: disable=unused-import</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">_os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"MXNET_ENFORCE_CYTHON"</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="s2">"Cython Module cannot be loaded but MXNET_ENFORCE_CYTHON=1"</span><span class="p">)</span>
    <span class="kn">from</span> <span class="nn">._ctypes.symbol</span> <span class="k">import</span> <span class="n">SymbolBase</span><span class="p">,</span> <span class="n">_set_symbol_class</span>
    <span class="kn">from</span> <span class="nn">._ctypes.symbol</span> <span class="k">import</span> <span class="n">_symbol_creator</span>  <span class="c1"># pylint: disable=unused-import</span>


<div class="viewcode-block" id="Symbol"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Symbol">[docs]</a><span class="k">class</span> <span class="nc">Symbol</span><span class="p">(</span><span class="n">SymbolBase</span><span class="p">):</span>
    <span class="sd">"""Symbol is symbolic graph of the mxnet."""</span>
    <span class="c1"># disable dictionary storage, also do not have parent type.</span>
    <span class="c1"># pylint: disable=no-member</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Gets a string representation of the symbol."""</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">i</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">])</span>
            <span class="k">return</span> <span class="s1">'<</span><span class="si">%s</span><span class="s1"> group [</span><span class="si">%s</span><span class="s1">]>'</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">'<</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">>'</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Returns a generator object of symbol.</span>

<span class="sd">        One can loop through the returned object list to get outputs.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> a = mx.sym.Variable('a')</span>
<span class="sd">        >>> b = mx.sym.Variable('b')</span>
<span class="sd">        >>> c = a+b</span>
<span class="sd">        >>> d = mx.sym.Variable('d')</span>
<span class="sd">        >>> e = d+c</span>
<span class="sd">        >>> out = e.get_children()</span>
<span class="sd">        >>> out</span>
<span class="sd">        <Symbol Grouped></span>
<span class="sd">        >>> for i in out:</span>
<span class="sd">        ...     i</span>
<span class="sd">        ...</span>
<span class="sd">        <Symbol d></span>
<span class="sd">        <Symbol _plus0></span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_outputs</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">"""x.__add__(y) <=> x+y</span>

<span class="sd">        Scalar input is supported.</span>
<span class="sd">        Broadcasting is not supported. Use `broadcast_add` instead. """</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_Plus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_PlusScalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'type </span><span class="si">%s</span><span class="s1"> not supported'</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">NotImplementedForSymbol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="fm">__iadd__</span><span class="p">,</span> <span class="s1">'+='</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__add__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">"""x.__sub__(y) <=> x-y</span>

<span class="sd">        Scalar input is supported.</span>
<span class="sd">        Broadcasting is not supported. Use `broadcast_sub` instead. """</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_Minus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_MinusScalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'type </span><span class="si">%s</span><span class="s1"> not supported'</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">__isub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">NotImplementedForSymbol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="fm">__isub__</span><span class="p">,</span> <span class="s1">'-='</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">"""x.__rsub__(y) <=> y-x</span>

<span class="sd">        Only `NDArray` is supported for now.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> x = mx.nd.ones((2,3))*3</span>
<span class="sd">        >>> y = mx.nd.ones((2,3))</span>
<span class="sd">        >>> x.__rsub__(y).asnumpy()</span>
<span class="sd">        array([[-2., -2., -2.],</span>
<span class="sd">               [-2., -2., -2.]], dtype=float32)</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_RMinusScalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'type </span><span class="si">%s</span><span class="s1"> not supported'</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">"""x.__mul__(y) <=> x*y</span>

<span class="sd">        Scalar input is supported.</span>
<span class="sd">        Broadcasting is not supported. Use `broadcast_mul` instead. """</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_Mul</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_MulScalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'type </span><span class="si">%s</span><span class="s1"> not supported'</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">__imul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">NotImplementedForSymbol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="fm">__imul__</span><span class="p">,</span> <span class="s1">'*='</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__mul__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__div__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">"""x.__div__(y) <=> x/y</span>

<span class="sd">        Scalar input is supported.</span>
<span class="sd">        Broadcasting is not supported. Use `broadcast_div` instead. """</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_Div</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_DivScalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'type </span><span class="si">%s</span><span class="s1"> not supported'</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">__rdiv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">"""x.__rdiv__(y) <=> y/x</span>

<span class="sd">        Only `NDArray` is supported for now.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> x = mx.nd.ones((2,3))*3</span>
<span class="sd">        >>> y = mx.nd.ones((2,3))</span>
<span class="sd">        >>> x.__rdiv__(y).asnumpy()</span>
<span class="sd">        array([[ 0.33333334,  0.33333334,  0.33333334],</span>
<span class="sd">               [ 0.33333334,  0.33333334,  0.33333334]], dtype=float32)</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_RDivScalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'type </span><span class="si">%s</span><span class="s1"> not supported'</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">__mod__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">"""x.__mod__(y) <=> x%y</span>

<span class="sd">        Scalar input is supported.</span>
<span class="sd">        Broadcasting is not supported. Use `broadcast_mod` instead. """</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_Mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_ModScalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'type </span><span class="si">%s</span><span class="s1"> not supported'</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">__rmod__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">"""x.__rmod__(y) <=> y%x</span>

<span class="sd">        Only `NDArray` is supported for now.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> x = mx.nd.ones((2,3))*3</span>
<span class="sd">        >>> y = mx.nd.ones((2,3))</span>
<span class="sd">        >>> x.__rmod__(y).asnumpy()</span>
<span class="sd">        array([[ 1.,  1.,  1.,</span>
<span class="sd">               [ 1.,  1.,  1., dtype=float32)</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_RModScalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'type </span><span class="si">%s</span><span class="s1"> not supported'</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">__idiv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">NotImplementedForSymbol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__idiv__</span><span class="p">,</span> <span class="s1">'/='</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__div__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__rtruediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__rdiv__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__itruediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">NotImplementedForSymbol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="fm">__itruediv__</span><span class="p">,</span> <span class="s1">'/='</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__pow__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">"""x.__pow__(y) <=> x**y</span>

<span class="sd">        Scalar input is supported.</span>
<span class="sd">        Broadcasting is not supported. Use `broadcast_pow` instead. """</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_Power</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_PowerScalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'type </span><span class="si">%s</span><span class="s1"> not supported'</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">__rpow__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">NotImplementedForSymbol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="fm">__rpow__</span><span class="p">,</span> <span class="s1">'y**x'</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""x.__neg__() <=> -x</span>

<span class="sd">        Numerical negative, element-wise.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> a = mx.sym.Variable('a')</span>
<span class="sd">        >>> a</span>
<span class="sd">        <Symbol a></span>
<span class="sd">        >>> -a</span>
<span class="sd">        <Symbol _mulscalar0></span>
<span class="sd">        >>> a_neg = a.__neg__()</span>
<span class="sd">        >>> c = a_neg*b</span>
<span class="sd">        >>> ex = c.eval(ctx=mx.cpu(), a=mx.nd.ones([2,3]), b=mx.nd.ones([2,3]))</span>
<span class="sd">        >>> ex[0].asnumpy()</span>
<span class="sd">        array([[-1., -1., -1.],</span>
<span class="sd">               [-1., -1., -1.]], dtype=float32)</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__mul__</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__deepcopy__</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__deepcopy__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
        <span class="sd">"""Returns a deep copy of the input object.</span>

<span class="sd">        This function returns a deep copy of the input object including the current state</span>
<span class="sd">        of all its parameters such as weights, biases, etc.</span>

<span class="sd">        Any changes made to the deep copy do not reflect in the original object.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> import copy</span>
<span class="sd">        >>> data = mx.sym.Variable('data')</span>
<span class="sd">        >>> data_1 = copy.deepcopy(data)</span>
<span class="sd">        >>> data_1 = 2*data</span>
<span class="sd">        >>> data_1.tojson()</span>
<span class="sd">        >>> data_1 is data    # Data got modified</span>
<span class="sd">        False</span>
<span class="sd">        """</span>
        <span class="n">handle</span> <span class="o">=</span> <span class="n">SymbolHandle</span><span class="p">()</span>
        <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolCopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span>
                                     <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">handle</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">Symbol</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">"""x.__eq__(y) <=> x==y</span>

<span class="sd">        Scalar input is supported.</span>
<span class="sd">        Broadcasting is not supported. Use `broadcast_equal` instead. """</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_equal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">numeric_types</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_equal_scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'type </span><span class="si">%s</span><span class="s1"> not supported'</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">"""x.__ne__(y) <=> x!=y</span>

<span class="sd">        Scalar input is supported.</span>
<span class="sd">        Broadcasting is not supported. Use `broadcast_not_equal` instead. """</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_not_equal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">numeric_types</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_not_equal_scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'type </span><span class="si">%s</span><span class="s1"> not supported'</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">"""x.__gt__(y) <=> x>y</span>

<span class="sd">        Scalar input is supported.</span>
<span class="sd">        Broadcasting is not supported. Use `broadcast_greater` instead. """</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_greater</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">numeric_types</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_greater_scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'type </span><span class="si">%s</span><span class="s1"> not supported'</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">"""x.__ge__(y) <=> x>=y</span>

<span class="sd">        Scalar input is supported.</span>
<span class="sd">        Broadcasting is not supported. Use `broadcast_greater_equal` instead. """</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_greater_equal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">numeric_types</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_greater_equal_scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'type </span><span class="si">%s</span><span class="s1"> not supported'</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">"""x.__lt__(y) <=> x<y</span>

<span class="sd">        Scalar input is supported.</span>
<span class="sd">        Broadcasting is not supported. Use `broadcast_lesser` instead. """</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_lesser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">numeric_types</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_lesser_scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'type </span><span class="si">%s</span><span class="s1"> not supported'</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">"""x.__le__(y) <=> x<=y</span>

<span class="sd">        Scalar input is supported.</span>
<span class="sd">        Broadcasting is not supported. Use `broadcast_lesser_equal` instead. """</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_lesser_equal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">numeric_types</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_lesser_equal_scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'type </span><span class="si">%s</span><span class="s1"> not supported'</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">handle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle</span>
        <span class="k">if</span> <span class="n">handle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">'handle'</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tojson</span><span class="p">()}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">'handle'</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="c1"># pylint: disable=assigning-non-slot</span>
        <span class="n">handle</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="s1">'handle'</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">handle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">json_str</span> <span class="o">=</span> <span class="n">handle</span>
            <span class="n">handle</span> <span class="o">=</span> <span class="n">SymbolHandle</span><span class="p">()</span>
            <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolCreateFromJSON</span><span class="p">(</span><span class="n">c_str</span><span class="p">(</span><span class="n">json_str</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">handle</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle</span> <span class="o">=</span> <span class="n">handle</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""Composes symbol using inputs.</span>

<span class="sd">        x.__call__(y, z) <=> x(y,z)</span>

<span class="sd">        This function internally calls `_compose` to compose the symbol and</span>
<span class="sd">        returns the composed symbol.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> data = mx.symbol.Variable('data')</span>
<span class="sd">        >>> net1 = mx.symbol.FullyConnected(data=data, name='fc1', num_hidden=10)</span>
<span class="sd">        >>> net2 = mx.symbol.FullyConnected(name='fc3', num_hidden=10)</span>
<span class="sd">        >>> composed = net2(fc3_data=net1, name='composed')</span>
<span class="sd">        >>> composed</span>
<span class="sd">        <Symbol composed></span>
<span class="sd">        >>> called = net2.__call__(fc3_data=net1, name='composed')</span>
<span class="sd">        >>> called</span>
<span class="sd">        <Symbol composed></span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        args:</span>
<span class="sd">            Positional arguments.</span>

<span class="sd">        kwargs:</span>
<span class="sd">            Keyword arguments.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The resulting symbol.</span>
<span class="sd">        """</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__copy__</span><span class="p">()</span>
        <span class="n">s</span><span class="o">.</span><span class="n">_compose</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="nf">_compose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""Composes symbol using inputs.</span>

<span class="sd">        x._compose(y, z) <=> x(y,z)</span>

<span class="sd">        This function mutates the current symbol.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> data = mx.symbol.Variable('data')</span>
<span class="sd">        >>> net1 = mx.symbol.FullyConnected(data=data, name='fc1', num_hidden=10)</span>
<span class="sd">        >>> net2 = mx.symbol.FullyConnected(name='fc3', num_hidden=10)</span>
<span class="sd">        >>> net2</span>
<span class="sd">        <Symbol fc3></span>
<span class="sd">        >>> net2._compose(fc3_data=net1, name='composed')</span>
<span class="sd">        >>> net2</span>
<span class="sd">        <Symbol composed></span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        args:</span>
<span class="sd">            Positional arguments.</span>

<span class="sd">        kwargs:</span>
<span class="sd">            Keyword arguments.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            The resulting symbol.</span>
<span class="sd">        """</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'name'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">c_str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'compose only accept input Symbols </span><span class="se">\</span>
<span class="s1">                either as positional or keyword arguments, not both'</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'Compose expect `Symbol` as arguments'</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'Compose expect `Symbol` as arguments'</span><span class="p">)</span>

        <span class="n">num_args</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="n">c_array</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">,</span> <span class="p">[</span><span class="n">c_str</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">])</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">c_array</span><span class="p">(</span><span class="n">SymbolHandle</span><span class="p">,</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">handle</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">c_array</span><span class="p">(</span><span class="n">SymbolHandle</span><span class="p">,</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">handle</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">args</span><span class="p">])</span>
        <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolCompose</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">num_args</span><span class="p">,</span> <span class="n">keys</span><span class="p">,</span> <span class="n">args</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">"""x.__getitem__(i) <=> x[i]</span>

<span class="sd">        Returns a sliced view of the input symbol.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> a = mx.sym.var('a')</span>
<span class="sd">        >>> a.__getitem__(0)</span>
<span class="sd">        <Symbol a></span>
<span class="sd">        >>> a[0]</span>
<span class="sd">        <Symbol a></span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        index : int or str</span>
<span class="sd">            Indexing key</span>

<span class="sd">        """</span>
        <span class="n">output_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_outputs</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">py_slice</span><span class="p">):</span>
            <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">index</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">index</span><span class="o">.</span><span class="n">start</span>
            <span class="n">stop</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">output_names</span><span class="p">)</span> <span class="k">if</span> <span class="n">index</span><span class="o">.</span><span class="n">stop</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">index</span><span class="o">.</span><span class="n">stop</span>
            <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">index</span><span class="o">.</span><span class="n">step</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">index</span><span class="o">.</span><span class="n">step</span>
            <span class="k">return</span> <span class="n">Group</span><span class="p">([</span><span class="bp">self</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">step</span><span class="p">)])</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
            <span class="n">idx</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">output_names</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="n">index</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">idx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'There are multiple outputs with name </span><span class="se">\"</span><span class="si">%s</span><span class="se">\"</span><span class="s1">'</span> <span class="o">%</span> <span class="n">index</span><span class="p">)</span>
                    <span class="n">idx</span> <span class="o">=</span> <span class="n">i</span>
            <span class="k">if</span> <span class="n">idx</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'Cannot find output that matches name </span><span class="se">\"</span><span class="si">%s</span><span class="se">\"</span><span class="s1">'</span> <span class="o">%</span> <span class="n">index</span><span class="p">)</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">idx</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'Symbol only support integer index to fetch i-th output'</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">>=</span> <span class="nb">len</span><span class="p">(</span><span class="n">output_names</span><span class="p">):</span>
            <span class="c1"># Important, python determines the end by this exception</span>
            <span class="k">raise</span> <span class="ne">IndexError</span>
        <span class="n">handle</span> <span class="o">=</span> <span class="n">SymbolHandle</span><span class="p">()</span>
        <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolGetOutput</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">mx_uint</span><span class="p">(</span><span class="n">index</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">handle</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">Symbol</span><span class="p">(</span><span class="n">handle</span><span class="o">=</span><span class="n">handle</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Gets name string from the symbol, this function only works for non-grouped symbol.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        value : str</span>
<span class="sd">            The name of this symbol, returns ``None`` for grouped symbol.</span>
<span class="sd">        """</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">()</span>
        <span class="n">success</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">()</span>
        <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolGetName</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">ret</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">success</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">success</span><span class="o">.</span><span class="n">value</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">py_str</span><span class="p">(</span><span class="n">ret</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

<div class="viewcode-block" id="Symbol.attr"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Symbol.attr">[docs]</a>    <span class="k">def</span> <span class="nf">attr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">"""Returns the attribute string for corresponding input key from the symbol.</span>

<span class="sd">        This function only works for non-grouped symbols.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> data = mx.sym.Variable('data', attr={'mood': 'angry'})</span>
<span class="sd">        >>> data.attr('mood')</span>
<span class="sd">        'angry'</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        key : str</span>
<span class="sd">            The key corresponding to the desired attribute.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        value : str</span>
<span class="sd">            The desired attribute value, returns ``None`` if the attribute does not exist.</span>
<span class="sd">        """</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">()</span>
        <span class="n">success</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">()</span>
        <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolGetAttr</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">c_str</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">ret</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">success</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">success</span><span class="o">.</span><span class="n">value</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">py_str</span><span class="p">(</span><span class="n">ret</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Symbol.list_attr"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Symbol.list_attr">[docs]</a>    <span class="k">def</span> <span class="nf">list_attr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">"""Gets all attributes from the symbol.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> data = mx.sym.Variable('data', attr={'mood': 'angry'})</span>
<span class="sd">        >>> data.list_attr()</span>
<span class="sd">        {'mood': 'angry'}</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ret : Dict of str to str</span>
<span class="sd">            A dictionary mapping attribute keys to values.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">recursive</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">DeprecationWarning</span><span class="p">(</span><span class="s2">"Symbol.list_attr with recursive=True has been deprecated. "</span>
                                     <span class="s2">"Please use attr_dict instead."</span><span class="p">)</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">mx_uint</span><span class="p">()</span>
        <span class="n">pairs</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">)()</span>
        <span class="n">f_handle</span> <span class="o">=</span> <span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolListAttrShallow</span>
        <span class="n">check_call</span><span class="p">(</span><span class="n">f_handle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">size</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">pairs</span><span class="p">)))</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">py_str</span><span class="p">(</span><span class="n">pairs</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span><span class="p">]):</span> <span class="n">py_str</span><span class="p">(</span><span class="n">pairs</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="o">.</span><span class="n">value</span><span class="p">)}</span></div>

<div class="viewcode-block" id="Symbol.attr_dict"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Symbol.attr_dict">[docs]</a>    <span class="k">def</span> <span class="nf">attr_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Recursively gets all attributes from the symbol and its children.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> a = mx.sym.Variable('a', attr={'a1':'a2'})</span>
<span class="sd">        >>> b = mx.sym.Variable('b', attr={'b1':'b2'})</span>
<span class="sd">        >>> c = a+b</span>
<span class="sd">        >>> c.attr_dict()</span>
<span class="sd">        {'a': {'a1': 'a2'}, 'b': {'b1': 'b2'}}</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ret : Dict of str to dict</span>
<span class="sd">            There is a key in the returned dict for every child with non-empty attribute set.</span>
<span class="sd">            For each symbol, the name of the symbol is its key in the dict</span>
<span class="sd">            and the correspond value is that symbol's attribute list (itself a dictionary).</span>
<span class="sd">        """</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">mx_uint</span><span class="p">()</span>
        <span class="n">pairs</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">)()</span>
        <span class="n">f_handle</span> <span class="o">=</span> <span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolListAttr</span>
        <span class="n">check_call</span><span class="p">(</span><span class="n">f_handle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">size</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">pairs</span><span class="p">)))</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
            <span class="n">name</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="n">py_str</span><span class="p">(</span><span class="n">pairs</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'$'</span><span class="p">)</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">py_str</span><span class="p">(</span><span class="n">pairs</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ret</span><span class="p">:</span>
                <span class="n">ret</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">ret</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="k">return</span> <span class="n">ret</span></div>

    <span class="k">def</span> <span class="nf">_set_attr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""Sets an attribute of the symbol.</span>

<span class="sd">        For example. A._set_attr(foo="bar") adds the mapping ``"{foo: bar}"``</span>
<span class="sd">        to the symbol's attribute dictionary.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        **kwargs</span>
<span class="sd">            The attributes to set</span>
<span class="sd">        """</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Set Attr only accepts string values"</span><span class="p">)</span>
            <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolSetAttr</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">c_str</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="n">c_str</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))))</span>

<div class="viewcode-block" id="Symbol.get_internals"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Symbol.get_internals">[docs]</a>    <span class="k">def</span> <span class="nf">get_internals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Gets a new grouped symbol `sgroup`. The output of `sgroup` is a list of</span>
<span class="sd">        outputs of all of the internal nodes.</span>

<span class="sd">        Consider the following code:</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> a = mx.sym.var('a')</span>
<span class="sd">        >>> b = mx.sym.var('b')</span>
<span class="sd">        >>> c = a + b</span>
<span class="sd">        >>> d = c.get_internals()</span>
<span class="sd">        >>> d</span>
<span class="sd">        <Symbol Grouped></span>
<span class="sd">        >>> d.list_outputs()</span>
<span class="sd">        ['a', 'b', '_plus4_output']</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        sgroup : Symbol</span>
<span class="sd">            A symbol group containing all internal and leaf nodes of the computation graph</span>
<span class="sd">            used to compute the symbol.</span>
<span class="sd">        """</span>
        <span class="n">handle</span> <span class="o">=</span> <span class="n">SymbolHandle</span><span class="p">()</span>
        <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolGetInternals</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">handle</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">Symbol</span><span class="p">(</span><span class="n">handle</span><span class="o">=</span><span class="n">handle</span><span class="p">)</span></div>

<div class="viewcode-block" id="Symbol.get_children"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Symbol.get_children">[docs]</a>    <span class="k">def</span> <span class="nf">get_children</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Gets a new grouped symbol whose output contains</span>
<span class="sd">        inputs to output nodes of the original symbol.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> x = mx.sym.Variable('x')</span>
<span class="sd">        >>> y = mx.sym.Variable('y')</span>
<span class="sd">        >>> z = mx.sym.Variable('z')</span>
<span class="sd">        >>> a = y+z</span>
<span class="sd">        >>> b = x+a</span>
<span class="sd">        >>> b.get_children()</span>
<span class="sd">        <Symbol Grouped></span>
<span class="sd">        >>> b.get_children().list_outputs()</span>
<span class="sd">        ['x', '_plus10_output']</span>
<span class="sd">        >>> b.get_children().get_children().list_outputs()</span>
<span class="sd">        ['y', 'z']</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        sgroup : Symbol or None</span>
<span class="sd">            The children of the head node. If the symbol has no</span>
<span class="sd">            inputs then ``None`` will be returned.</span>
<span class="sd">        """</span>
        <span class="n">handle</span> <span class="o">=</span> <span class="n">SymbolHandle</span><span class="p">()</span>
        <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolGetChildren</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">handle</span><span class="p">)))</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">(</span><span class="n">handle</span><span class="o">=</span><span class="n">handle</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ret</span><span class="o">.</span><span class="n">list_outputs</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">ret</span></div>

<div class="viewcode-block" id="Symbol.list_arguments"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Symbol.list_arguments">[docs]</a>    <span class="k">def</span> <span class="nf">list_arguments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Lists all the arguments in the symbol.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> a = mx.sym.var('a')</span>
<span class="sd">        >>> b = mx.sym.var('b')</span>
<span class="sd">        >>> c = a + b</span>
<span class="sd">        >>> c.list_arguments</span>
<span class="sd">        ['a', 'b']</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        args : list of string</span>
<span class="sd">            List containing the names of all the arguments required to compute the symbol.</span>
<span class="sd">        """</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_uint</span><span class="p">()</span>
        <span class="n">sarr</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">)()</span>
        <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolListArguments</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">size</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">sarr</span><span class="p">)))</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">py_str</span><span class="p">(</span><span class="n">sarr</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span></div>

<div class="viewcode-block" id="Symbol.list_outputs"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Symbol.list_outputs">[docs]</a>    <span class="k">def</span> <span class="nf">list_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Lists all the outputs in the symbol.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> a = mx.sym.var('a')</span>
<span class="sd">        >>> b = mx.sym.var('b')</span>
<span class="sd">        >>> c = a + b</span>
<span class="sd">        >>> c.list_outputs()</span>
<span class="sd">        ['_plus12_output']</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of str</span>
<span class="sd">            List of all the outputs.</span>
<span class="sd">            For most symbols, this list contains only the name of this symbol.</span>
<span class="sd">            For symbol groups, this is a list with the names of all symbols</span>
<span class="sd">            in the group.</span>
<span class="sd">        """</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_uint</span><span class="p">()</span>
        <span class="n">sarr</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">)()</span>
        <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolListOutputs</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">size</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">sarr</span><span class="p">)))</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">py_str</span><span class="p">(</span><span class="n">sarr</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span></div>

<div class="viewcode-block" id="Symbol.list_auxiliary_states"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Symbol.list_auxiliary_states">[docs]</a>    <span class="k">def</span> <span class="nf">list_auxiliary_states</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Lists all the auxiliary states in the symbol.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> a = mx.sym.var('a')</span>
<span class="sd">        >>> b = mx.sym.var('b')</span>
<span class="sd">        >>> c = a + b</span>
<span class="sd">        >>> c.list_auxiliary_states()</span>
<span class="sd">        []</span>

<span class="sd">        Example of auxiliary states in `BatchNorm`.</span>

<span class="sd">        >>> data = mx.symbol.Variable('data')</span>
<span class="sd">        >>> weight = mx.sym.Variable(name='fc1_weight')</span>
<span class="sd">        >>> fc1  = mx.symbol.FullyConnected(data = data, weight=weight, name='fc1', num_hidden=128)</span>
<span class="sd">        >>> fc2 = mx.symbol.BatchNorm(fc1, name='batchnorm0')</span>
<span class="sd">        >>> fc2.list_auxiliary_states()</span>
<span class="sd">        ['batchnorm0_moving_mean', 'batchnorm0_moving_var']</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        aux_states : list of str</span>
<span class="sd">            List of the auxiliary states in input symbol.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Auxiliary states are special states of symbols that do not correspond to an argument,</span>
<span class="sd">        and are not updated by gradient descent. Common examples of auxiliary states</span>
<span class="sd">        include the `moving_mean` and `moving_variance` in `BatchNorm`.</span>
<span class="sd">        Most operators do not have auxiliary states.</span>
<span class="sd">        """</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_uint</span><span class="p">()</span>
        <span class="n">sarr</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">)()</span>
        <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolListAuxiliaryStates</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">size</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">sarr</span><span class="p">)))</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">py_str</span><span class="p">(</span><span class="n">sarr</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span></div>

<div class="viewcode-block" id="Symbol.list_inputs"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Symbol.list_inputs">[docs]</a>    <span class="k">def</span> <span class="nf">list_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Lists all arguments and auxiliary states of this Symbol.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        inputs : list of str</span>
<span class="sd">            List of all inputs.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        >>> bn = mx.sym.BatchNorm(name='bn')</span>
<span class="sd">        >>> bn.list_arguments()</span>
<span class="sd">        ['bn_data', 'bn_gamma', 'bn_beta']</span>
<span class="sd">        >>> bn.list_auxiliary_states()</span>
<span class="sd">        ['bn_moving_mean', 'bn_moving_var']</span>
<span class="sd">        >>> bn.list_inputs()</span>
<span class="sd">        ['bn_data', 'bn_gamma', 'bn_beta', 'bn_moving_mean', 'bn_moving_var']</span>
<span class="sd">        """</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_uint</span><span class="p">()</span>
        <span class="n">sarr</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">)()</span>
        <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">NNSymbolListInputNames</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">size</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">sarr</span><span class="p">)))</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">py_str</span><span class="p">(</span><span class="n">sarr</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span></div>

<div class="viewcode-block" id="Symbol.infer_type"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Symbol.infer_type">[docs]</a>    <span class="k">def</span> <span class="nf">infer_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""Infers the type of all arguments and all outputs, given the known types</span>
<span class="sd">        for some arguments.</span>

<span class="sd">        This function takes the known types of some arguments in either positional way</span>
<span class="sd">        or keyword argument way as input. It returns a tuple of `None` values</span>
<span class="sd">        if there is not enough information to deduce the missing types.</span>

<span class="sd">        Inconsistencies in the known types will cause an error to be raised.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> a = mx.sym.var('a')</span>
<span class="sd">        >>> b = mx.sym.var('b')</span>
<span class="sd">        >>> c = a + b</span>
<span class="sd">        >>> arg_types, out_types, aux_types = c.infer_type(a='float32')</span>
<span class="sd">        >>> arg_types</span>
<span class="sd">        [<type 'numpy.float32'>, <type 'numpy.float32'>]</span>
<span class="sd">        >>> out_types</span>
<span class="sd">        [<type 'numpy.float32'>]</span>
<span class="sd">        >>> aux_types</span>
<span class="sd">        []</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        *args :</span>
<span class="sd">            Type of known arguments in a positional way.</span>
<span class="sd">            Unknown type can be marked as None.</span>

<span class="sd">        **kwargs :</span>
<span class="sd">            Keyword arguments of known types.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        arg_types : list of numpy.dtype or None</span>
<span class="sd">            List of argument types.</span>
<span class="sd">            The order is same as the order of list_arguments().</span>
<span class="sd">        out_types : list of numpy.dtype or None</span>
<span class="sd">            List of output types.</span>
<span class="sd">            The order is same as the order of list_outputs().</span>
<span class="sd">        aux_types : list of numpy.dtype or None</span>
<span class="sd">            List of auxiliary state types.</span>
<span class="sd">            The order is same as the order of list_auxiliary_states().</span>
<span class="sd">        """</span>
        <span class="c1"># pylint: disable=too-many-locals</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'Can only specify known argument </span><span class="se">\</span>
<span class="s1">                    types either by positional or kwargs way.'</span><span class="p">)</span>
        <span class="n">sdata</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="n">_numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">type</span>
                    <span class="k">if</span> <span class="n">s</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_DTYPE_NP_TO_MX</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'Argument need to be one of '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">_DTYPE_NP_TO_MX</span><span class="p">))</span>
                    <span class="n">sdata</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_DTYPE_NP_TO_MX</span><span class="p">[</span><span class="n">s</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">sdata</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">v</span> <span class="o">=</span> <span class="n">_numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">.</span><span class="n">type</span>
                <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">_DTYPE_NP_TO_MX</span><span class="p">:</span>
                    <span class="n">keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_str</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>
                    <span class="n">sdata</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_DTYPE_NP_TO_MX</span><span class="p">[</span><span class="n">v</span><span class="p">])</span>
        <span class="n">arg_type_size</span> <span class="o">=</span> <span class="n">mx_uint</span><span class="p">()</span>
        <span class="n">arg_type_data</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">)()</span>
        <span class="n">out_type_size</span> <span class="o">=</span> <span class="n">mx_uint</span><span class="p">()</span>
        <span class="n">out_type_data</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">)()</span>
        <span class="n">aux_type_size</span> <span class="o">=</span> <span class="n">mx_uint</span><span class="p">()</span>
        <span class="n">aux_type_data</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">)()</span>
        <span class="n">complete</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">()</span>
        <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolInferType</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span>
            <span class="n">mx_uint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sdata</span><span class="p">)),</span>
            <span class="n">c_array</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">,</span> <span class="n">keys</span><span class="p">),</span>
            <span class="n">c_array</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">,</span> <span class="n">sdata</span><span class="p">),</span>
            <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">arg_type_size</span><span class="p">),</span>
            <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">arg_type_data</span><span class="p">),</span>
            <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">out_type_size</span><span class="p">),</span>
            <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">out_type_data</span><span class="p">),</span>
            <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">aux_type_size</span><span class="p">),</span>
            <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">aux_type_data</span><span class="p">),</span>
            <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">complete</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">complete</span><span class="o">.</span><span class="n">value</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">arg_types</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">_DTYPE_MX_TO_NP</span><span class="p">[</span><span class="n">arg_type_data</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">arg_type_size</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>
            <span class="n">out_types</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">_DTYPE_MX_TO_NP</span><span class="p">[</span><span class="n">out_type_data</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">out_type_size</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>
            <span class="n">aux_types</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">_DTYPE_MX_TO_NP</span><span class="p">[</span><span class="n">aux_type_data</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">aux_type_size</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">arg_types</span><span class="p">,</span> <span class="n">out_types</span><span class="p">,</span> <span class="n">aux_types</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>
            <span class="c1"># pylint: enable=too-many-locals</span>

<div class="viewcode-block" id="Symbol.infer_shape"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Symbol.infer_shape">[docs]</a>    <span class="k">def</span> <span class="nf">infer_shape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""Infers the shapes of all arguments and all outputs given the known shapes of</span>
<span class="sd">        some arguments.</span>

<span class="sd">        This function takes the known shapes of some arguments in either positional way</span>
<span class="sd">        or keyword argument way as input. It returns a tuple of `None` values</span>
<span class="sd">        if there is not enough information to deduce the missing shapes.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> a = mx.sym.var('a')</span>
<span class="sd">        >>> b = mx.sym.var('b')</span>
<span class="sd">        >>> c = a + b</span>
<span class="sd">        >>> arg_shapes, out_shapes, aux_shapes = c.infer_shape(a=(3,3))</span>
<span class="sd">        >>> arg_shapes</span>
<span class="sd">        [(3L, 3L), (3L, 3L)]</span>
<span class="sd">        >>> out_shapes</span>
<span class="sd">        [(3L, 3L)]</span>
<span class="sd">        >>> aux_shapes</span>
<span class="sd">        []</span>
<span class="sd">        >>> c.infer_shape(a=(0,3)) # 0s in shape means unknown dimensions. So, returns None.</span>
<span class="sd">        (None, None, None)</span>

<span class="sd">        Inconsistencies in the known shapes will cause an error to be raised.</span>
<span class="sd">        See the following example:</span>

<span class="sd">        >>> data = mx.sym.Variable('data')</span>
<span class="sd">        >>> out = mx.sym.FullyConnected(data=data, name='fc1', num_hidden=1000)</span>
<span class="sd">        >>> out = mx.sym.Activation(data=out, act_type='relu')</span>
<span class="sd">        >>> out = mx.sym.FullyConnected(data=out, name='fc2', num_hidden=10)</span>
<span class="sd">        >>> weight_shape= (1, 100)</span>
<span class="sd">        >>> data_shape = (100, 100)</span>
<span class="sd">        >>> out.infer_shape(data=data_shape, fc1_weight=weight_shape)</span>
<span class="sd">        Error in operator fc1: Shape inconsistent, Provided=(1,100), inferred shape=(1000,100)</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        *args :</span>
<span class="sd">            Shape of arguments in a positional way.</span>
<span class="sd">            Unknown shape can be marked as None.</span>

<span class="sd">        **kwargs :</span>
<span class="sd">            Keyword arguments of the known shapes.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        arg_shapes : list of tuple or None</span>
<span class="sd">            List of argument shapes.</span>
<span class="sd">            The order is same as the order of list_arguments().</span>
<span class="sd">        out_shapes : list of tuple or None</span>
<span class="sd">            List of output shapes.</span>
<span class="sd">            The order is same as the order of list_outputs().</span>
<span class="sd">        aux_shapes : list of tuple or None</span>
<span class="sd">            List of auxiliary state shapes.</span>
<span class="sd">            The order is same as the order of list_auxiliary_states().</span>
<span class="sd">        """</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_infer_shape_impl</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">arg_shapes</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_infer_shape_impl</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="n">arg_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_arguments</span><span class="p">()</span>
                <span class="n">unknowns</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">shape</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">arg_names</span><span class="p">,</span> <span class="n">arg_shapes</span><span class="p">):</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">shape</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">_numpy</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">shape</span><span class="p">):</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unknowns</span><span class="p">)</span> <span class="o">>=</span> <span class="mi">10</span><span class="p">:</span>
                            <span class="n">unknowns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'...'</span><span class="p">)</span>
                            <span class="k">break</span>
                        <span class="n">unknowns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'</span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">shape</span><span class="p">)))</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="s2">"Cannot decide shape for the following arguments "</span> <span class="o">+</span>
                    <span class="s2">"(0s in shape means unknown dimensions). "</span> <span class="o">+</span>
                    <span class="s2">"Consider providing them as input:</span><span class="se">\n\t</span><span class="s2">"</span> <span class="o">+</span>
                    <span class="s2">"</span><span class="se">\n\t</span><span class="s2">"</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">unknowns</span><span class="p">),</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="n">MXNetError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"infer_shape error. Arguments:"</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">arg</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">"  #</span><span class="si">%d</span><span class="s2">: </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">arg</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">"  </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
            <span class="k">raise</span></div>

<div class="viewcode-block" id="Symbol.infer_shape_partial"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Symbol.infer_shape_partial">[docs]</a>    <span class="k">def</span> <span class="nf">infer_shape_partial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""Infers the shape partially.</span>

<span class="sd">        This functions works the same way as `infer_shape`,</span>
<span class="sd">        except that this function can return partial results.</span>

<span class="sd">        In the following example, information about fc2 is not available. So, `infer_shape`</span>
<span class="sd">        will return a tuple of `None` values but `infer_shape_partial` will return partial values.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> data = mx.sym.Variable('data')</span>
<span class="sd">        >>> prev = mx.sym.Variable('prev')</span>
<span class="sd">        >>> fc1  = mx.sym.FullyConnected(data=data, name='fc1', num_hidden=128)</span>
<span class="sd">        >>> fc2  = mx.sym.FullyConnected(data=prev, name='fc2', num_hidden=128)</span>
<span class="sd">        >>> out  = mx.sym.Activation(data=mx.sym.elemwise_add(fc1, fc2), act_type='relu')</span>
<span class="sd">        >>> out.list_arguments()</span>
<span class="sd">        ['data', 'fc1_weight', 'fc1_bias', 'prev', 'fc2_weight', 'fc2_bias']</span>
<span class="sd">        >>> out.infer_shape(data=(10,64))</span>
<span class="sd">        (None, None, None)</span>
<span class="sd">        >>> out.infer_shape_partial(data=(10,64))</span>
<span class="sd">        ([(10L, 64L), (128L, 64L), (128L,), (), (), ()], [(10L, 128L)], [])</span>
<span class="sd">        >>> # infers shape if you give information about fc2</span>
<span class="sd">        >>> out.infer_shape(data=(10,64), prev=(10,128))</span>
<span class="sd">        ([(10L, 64L), (128L, 64L), (128L,), (10L, 128L), (128L, 128L), (128L,)], [(10L, 128L)], [])</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        *args :</span>
<span class="sd">            Shape of arguments in a positional way.</span>
<span class="sd">            Unknown shape can be marked as None</span>

<span class="sd">        **kwargs :</span>
<span class="sd">            Keyword arguments of known shapes.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        arg_shapes : list of tuple or None</span>
<span class="sd">            List of argument shapes.</span>
<span class="sd">            The order is same as the order of list_arguments().</span>
<span class="sd">        out_shapes : list of tuple or None</span>
<span class="sd">            List of output shapes.</span>
<span class="sd">            The order is same as the order of list_outputs().</span>
<span class="sd">        aux_shapes : list of tuple or None</span>
<span class="sd">            List of auxiliary state shapes.</span>
<span class="sd">            The order is same as the order of list_auxiliary_states().</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_infer_shape_impl</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_infer_shape_impl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">partial</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""The actual implementation for calling shape inference API."""</span>
        <span class="c1"># pylint: disable=too-many-locals</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'Can only specify known argument </span><span class="se">\</span>
<span class="s1">                    shapes either by positional or kwargs way.'</span><span class="p">)</span>
        <span class="n">sdata</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">indptr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">"Arguments need to be shapes (tuple), "</span>
                                        <span class="s2">"but argument </span><span class="si">%d</span><span class="s2"> is </span><span class="si">%s</span><span class="s2">."</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
                    <span class="n">sdata</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                <span class="n">indptr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sdata</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">"Arguments need to be shapes (tuple), "</span>
                                    <span class="s2">"but '</span><span class="si">%s</span><span class="s2">' is </span><span class="si">%s</span><span class="s2">."</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
                <span class="n">keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_str</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>
                <span class="n">sdata</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="n">indptr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sdata</span><span class="p">))</span>
        <span class="n">arg_shape_size</span> <span class="o">=</span> <span class="n">mx_uint</span><span class="p">()</span>
        <span class="n">arg_shape_ndim</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">mx_uint</span><span class="p">)()</span>
        <span class="n">arg_shape_data</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">mx_uint</span><span class="p">))()</span>
        <span class="n">out_shape_size</span> <span class="o">=</span> <span class="n">mx_uint</span><span class="p">()</span>
        <span class="n">out_shape_ndim</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">mx_uint</span><span class="p">)()</span>
        <span class="n">out_shape_data</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">mx_uint</span><span class="p">))()</span>
        <span class="n">aux_shape_size</span> <span class="o">=</span> <span class="n">mx_uint</span><span class="p">()</span>
        <span class="n">aux_shape_ndim</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">mx_uint</span><span class="p">)()</span>
        <span class="n">aux_shape_data</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">mx_uint</span><span class="p">))()</span>
        <span class="n">complete</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">partial</span><span class="p">:</span>
            <span class="n">infer_func</span> <span class="o">=</span> <span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolInferShapePartial</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">infer_func</span> <span class="o">=</span> <span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolInferShape</span>
        <span class="n">check_call</span><span class="p">(</span><span class="n">infer_func</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span>
            <span class="n">mx_uint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">indptr</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span>
            <span class="n">c_array</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">,</span> <span class="n">keys</span><span class="p">),</span>
            <span class="n">c_array</span><span class="p">(</span><span class="n">mx_uint</span><span class="p">,</span> <span class="n">indptr</span><span class="p">),</span>
            <span class="n">c_array</span><span class="p">(</span><span class="n">mx_uint</span><span class="p">,</span> <span class="n">sdata</span><span class="p">),</span>
            <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">arg_shape_size</span><span class="p">),</span>
            <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">arg_shape_ndim</span><span class="p">),</span>
            <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">arg_shape_data</span><span class="p">),</span>
            <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">out_shape_size</span><span class="p">),</span>
            <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">out_shape_ndim</span><span class="p">),</span>
            <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">out_shape_data</span><span class="p">),</span>
            <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">aux_shape_size</span><span class="p">),</span>
            <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">aux_shape_ndim</span><span class="p">),</span>
            <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">aux_shape_data</span><span class="p">),</span>
            <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">complete</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">complete</span><span class="o">.</span><span class="n">value</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">arg_shapes</span> <span class="o">=</span> <span class="p">[</span>
                <span class="nb">tuple</span><span class="p">(</span><span class="n">arg_shape_data</span><span class="p">[</span><span class="n">i</span><span class="p">][:</span><span class="n">arg_shape_ndim</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">arg_shape_size</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>
            <span class="n">out_shapes</span> <span class="o">=</span> <span class="p">[</span>
                <span class="nb">tuple</span><span class="p">(</span><span class="n">out_shape_data</span><span class="p">[</span><span class="n">i</span><span class="p">][:</span><span class="n">out_shape_ndim</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">out_shape_size</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>
            <span class="n">aux_shapes</span> <span class="o">=</span> <span class="p">[</span>
                <span class="nb">tuple</span><span class="p">(</span><span class="n">aux_shape_data</span><span class="p">[</span><span class="n">i</span><span class="p">][:</span><span class="n">aux_shape_ndim</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">aux_shape_size</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">arg_shapes</span><span class="p">,</span> <span class="n">out_shapes</span><span class="p">,</span> <span class="n">aux_shapes</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="c1"># pylint: enable=too-many-locals</span>

<div class="viewcode-block" id="Symbol.debug_str"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Symbol.debug_str">[docs]</a>    <span class="k">def</span> <span class="nf">debug_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Gets a debug string of symbol.</span>

<span class="sd">        It contains Symbol output, variables and operators in the computation graph</span>
<span class="sd">        with their inputs, variables and attributes.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        string</span>
<span class="sd">            Debug string of the symbol.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        >>> a = mx.sym.Variable('a')</span>
<span class="sd">        >>> b = mx.sym.sin(a)</span>
<span class="sd">        >>> c = 2 * a + b</span>
<span class="sd">        >>> d = mx.sym.FullyConnected(data=c, num_hidden=10)</span>
<span class="sd">        >>> d.debug_str()</span>
<span class="sd">        >>> print d.debug_str()</span>
<span class="sd">        Symbol Outputs:</span>
<span class="sd">	        output[0]=fullyconnected0(0)</span>
<span class="sd">        Variable:a</span>
<span class="sd">        --------------------</span>
<span class="sd">        Op:_mul_scalar, Name=_mulscalar0</span>
<span class="sd">        Inputs:</span>
<span class="sd">        	arg[0]=a(0) version=0</span>
<span class="sd">        Attrs:</span>
<span class="sd">        	scalar=2</span>
<span class="sd">        --------------------</span>
<span class="sd">        Op:sin, Name=sin0</span>
<span class="sd">        Inputs:</span>
<span class="sd">        	arg[0]=a(0) version=0</span>
<span class="sd">        --------------------</span>
<span class="sd">        Op:elemwise_add, Name=_plus0</span>
<span class="sd">        Inputs:</span>
<span class="sd">        	arg[0]=_mulscalar0(0)</span>
<span class="sd">        	arg[1]=sin0(0)</span>
<span class="sd">        Variable:fullyconnected0_weight</span>
<span class="sd">        Variable:fullyconnected0_bias</span>
<span class="sd">        --------------------</span>
<span class="sd">        Op:FullyConnected, Name=fullyconnected0</span>
<span class="sd">        Inputs:</span>
<span class="sd">        	arg[0]=_plus0(0)</span>
<span class="sd">        	arg[1]=fullyconnected0_weight(0) version=0</span>
<span class="sd">        	arg[2]=fullyconnected0_bias(0) version=0</span>
<span class="sd">        Attrs:</span>
<span class="sd">        	num_hidden=10</span>
<span class="sd">        """</span>
        <span class="n">debug_str</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">()</span>
        <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolPrint</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">debug_str</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">py_str</span><span class="p">(</span><span class="n">debug_str</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="Symbol.save"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Symbol.save">[docs]</a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fname</span><span class="p">):</span>
        <span class="sd">"""Saves symbol to a file.</span>

<span class="sd">        You can also use pickle to do the job if you only work on python.</span>
<span class="sd">        The advantage of `load`/`save` functions is that the file contents are language agnostic.</span>
<span class="sd">        This means the model saved by one language binding can be loaded by a different</span>
<span class="sd">        language binding of `MXNet`.</span>
<span class="sd">        You also get the benefit of being able to directly load/save from cloud storage(S3, HDFS).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        fname : str</span>
<span class="sd">            The name of the file.</span>

<span class="sd">            - "s3://my-bucket/path/my-s3-symbol"</span>
<span class="sd">            - "hdfs://my-bucket/path/my-hdfs-symbol"</span>
<span class="sd">            - "/path-to/my-local-symbol"</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        symbol.load : Used to load symbol from file.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'fname need to be string'</span><span class="p">)</span>
        <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolSaveToFile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">c_str</span><span class="p">(</span><span class="n">fname</span><span class="p">)))</span></div>

<div class="viewcode-block" id="Symbol.tojson"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Symbol.tojson">[docs]</a>    <span class="k">def</span> <span class="nf">tojson</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Saves symbol to a JSON string.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        symbol.load_json : Used to load symbol from JSON string.</span>
<span class="sd">        """</span>
        <span class="n">json_str</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">()</span>
        <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolSaveToJSON</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">json_str</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">py_str</span><span class="p">(</span><span class="n">json_str</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_get_ndarray_inputs</span><span class="p">(</span><span class="n">arg_key</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">arg_names</span><span class="p">,</span> <span class="n">allow_missing</span><span class="p">):</span>
        <span class="sd">"""Helper function to get NDArray lists handles from various inputs.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        arg_key : str</span>
<span class="sd">            The name of argument, used for error message.</span>

<span class="sd">        args : list of NDArray or dict of str to NDArray</span>
<span class="sd">            Input arguments to the symbols.</span>
<span class="sd">            If type is list of NDArray, the position is in the same order of arg_names.</span>
<span class="sd">            If type is dict of str to NDArray, then it maps the name of arguments</span>
<span class="sd">            to the corresponding NDArray,</span>

<span class="sd">        args_names : list of string</span>
<span class="sd">            List of argument names.</span>

<span class="sd">        allow_missing : boolean</span>
<span class="sd">            Whether missing argument is allowed.</span>
<span class="sd">            When allowed, the missing handle will be set to None(null)</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        handles : list of NDArrayHandle</span>
<span class="sd">            The positional list of NDArrayHandles generated from input.</span>
<span class="sd">        """</span>
        <span class="c1"># setup args</span>
        <span class="n">arg_handles</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">arg_arrays</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">arg_names</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'Length of </span><span class="si">%s</span><span class="s1"> does not match the number of arguments'</span> <span class="o">%</span> <span class="n">arg_key</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">narr</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">narr</span><span class="p">,</span> <span class="n">NDArray</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'Only accept list of NDArrays or dict of str to NDArray'</span><span class="p">)</span>
                <span class="n">arg_handles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">narr</span><span class="o">.</span><span class="n">handle</span><span class="p">)</span>
            <span class="n">arg_arrays</span> <span class="o">=</span> <span class="n">args</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">arg_names</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
                    <span class="n">narr</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">narr</span><span class="p">,</span> <span class="n">NDArray</span><span class="p">):</span>
                        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'Only accept list of NDArrays or dict of str to NDArray'</span><span class="p">)</span>
                    <span class="n">arg_handles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">narr</span><span class="o">.</span><span class="n">handle</span><span class="p">)</span>
                    <span class="n">arg_arrays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">narr</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">allow_missing</span><span class="p">:</span>
                        <span class="n">arg_handles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
                        <span class="n">arg_arrays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'key `</span><span class="si">%s</span><span class="s1">` is missing in `</span><span class="si">%s</span><span class="s1">`'</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">arg_key</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'Only accept list of NDArrays or dict of str to NDArray'</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">c_array</span><span class="p">(</span><span class="n">NDArrayHandle</span><span class="p">,</span> <span class="n">arg_handles</span><span class="p">),</span> <span class="n">arg_arrays</span>

<div class="viewcode-block" id="Symbol.simple_bind"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Symbol.simple_bind">[docs]</a>    <span class="k">def</span> <span class="nf">simple_bind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">,</span> <span class="n">grad_req</span><span class="o">=</span><span class="s1">'write'</span><span class="p">,</span> <span class="n">type_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">group2ctx</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="n">shared_arg_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shared_exec</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shared_buffer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""Bind current symbol to get an executor, allocate all the arguments needed.</span>
<span class="sd">        Allows specifying data types.</span>

<span class="sd">        This function simplifies the binding procedure. You need to specify only input data shapes.</span>
<span class="sd">        Before binding the executor, the function allocates arguments and auxiliary states</span>
<span class="sd">        that were not explicitly specified. Allows specifying data types.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> x = mx.sym.Variable('x')</span>
<span class="sd">        >>> y = mx.sym.FullyConnected(x, num_hidden=4)</span>
<span class="sd">        >>> exe = y.simple_bind(mx.cpu(), x=(5,4), grad_req='null')</span>
<span class="sd">        >>> exe.forward()</span>
<span class="sd">        [<NDArray 5x4 @cpu(0)>]</span>
<span class="sd">        >>> exe.outputs[0].asnumpy()</span>
<span class="sd">        array([[ 0.,  0.,  0.,  0.],</span>
<span class="sd">               [ 0.,  0.,  0.,  0.],</span>
<span class="sd">               [ 0.,  0.,  0.,  0.],</span>
<span class="sd">               [ 0.,  0.,  0.,  0.],</span>
<span class="sd">               [ 0.,  0.,  0.,  0.]], dtype=float32)</span>
<span class="sd">        >>> exe.arg_arrays</span>
<span class="sd">        [<NDArray 5x4 @cpu(0)>, <NDArray 4x4 @cpu(0)>, <NDArray 4 @cpu(0)>]</span>
<span class="sd">        >>> exe.grad_arrays</span>
<span class="sd">        [<NDArray 5x4 @cpu(0)>, <NDArray 4x4 @cpu(0)>, <NDArray 4 @cpu(0)>]</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ctx : Context</span>
<span class="sd">            The device context the generated executor to run on.</span>

<span class="sd">        grad_req: string</span>
<span class="sd">            {'write', 'add', 'null'}, or list of str or dict of str to str, optional</span>
<span class="sd">            To specify how we should update the gradient to the `args_grad`.</span>

<span class="sd">            - 'write' means every time gradient is written to specified `args_grad` NDArray.</span>
<span class="sd">            - 'add' means every time gradient is added to the specified NDArray.</span>
<span class="sd">            - 'null' means no action is taken, the gradient may not be calculated.</span>

<span class="sd">        type_dict  : Dict of str->numpy.dtype</span>
<span class="sd">            Input type dictionary, name->dtype</span>

<span class="sd">        group2ctx : Dict of string to mx.Context</span>
<span class="sd">            The dict mapping the `ctx_group` attribute to the context assignment.</span>

<span class="sd">        shared_arg_names : List of string</span>
<span class="sd">            The argument names whose `NDArray` of shared_exec can be reused for initializing</span>
<span class="sd">            the current executor.</span>

<span class="sd">        shared_exec : Executor</span>
<span class="sd">            The executor whose arg_arrays, arg_arrays, grad_arrays, and aux_arrays can be</span>
<span class="sd">            reused for initializing the current executor.</span>

<span class="sd">        shared_buffer : Dict of string to `NDArray`</span>
<span class="sd">            The dict mapping argument names to the `NDArray` that can be reused for initializing</span>
<span class="sd">            the current executor. This buffer will be checked for reuse if one argument name</span>
<span class="sd">            of the current executor is not found in `shared_arg_names`.</span>

<span class="sd">        kwargs : Dict of str->shape</span>
<span class="sd">            Input shape dictionary, name->shape</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        executor : mxnet.Executor</span>
<span class="sd">            The generated executor</span>
<span class="sd">        """</span>
        <span class="n">num_provided_arg_types</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">provided_arg_type_names</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">)()</span>  <span class="c1"># provided type argument names</span>
        <span class="n">provided_arg_type_data</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">mx_uint</span><span class="p">)()</span>  <span class="c1"># provided types</span>
        <span class="k">if</span> <span class="n">type_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">provided_arg_type_names</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">provided_arg_type_data</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">type_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">v</span> <span class="o">=</span> <span class="n">_numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">.</span><span class="n">type</span>
                <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">_DTYPE_NP_TO_MX</span><span class="p">:</span>
                    <span class="n">provided_arg_type_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_str</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>
                    <span class="n">provided_arg_type_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="n">_DTYPE_NP_TO_MX</span><span class="p">[</span><span class="n">v</span><span class="p">]))</span>
            <span class="n">num_provided_arg_types</span> <span class="o">=</span> <span class="n">mx_uint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">provided_arg_type_names</span><span class="p">))</span>
            <span class="n">provided_arg_type_names</span> <span class="o">=</span> <span class="n">c_array</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">,</span> <span class="n">provided_arg_type_names</span><span class="p">)</span>
            <span class="n">provided_arg_type_data</span> <span class="o">=</span> <span class="n">c_array</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">,</span> <span class="n">provided_arg_type_data</span><span class="p">)</span>

        <span class="n">provided_arg_shape_data</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># shape data</span>
        <span class="c1"># argument shape index in sdata,</span>
        <span class="c1"># e.g. [sdata[indptr[0]], sdata[indptr[1]]) is the shape of the first arg</span>
        <span class="n">provided_arg_shape_idx</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">provided_arg_shape_names</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># provided argument names</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># if k not in listed_arguments and k not in listed_aux_states:</span>
            <span class="c1">#   raise ValueError('arg name %s is not valid', k)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                <span class="n">provided_arg_shape_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_str</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>
                <span class="n">provided_arg_shape_data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="n">provided_arg_shape_idx</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">provided_arg_shape_data</span><span class="p">))</span>

        <span class="n">provided_req_type_list_len</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">provided_grad_req_types</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">)()</span>
        <span class="n">provided_grad_req_names</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">)()</span>
        <span class="k">if</span> <span class="n">grad_req</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">grad_req</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
                <span class="c1"># use provided_req_type_list_len = 0 to indicate this situation</span>
                <span class="n">provided_req_type_list_len</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">provided_grad_req_types</span> <span class="o">=</span> <span class="p">[</span><span class="n">c_str</span><span class="p">(</span><span class="n">grad_req</span><span class="p">)]</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">grad_req</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">grad_req</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">'grad_req in simple_bind cannot be an empty list'</span><span class="p">)</span>
                <span class="n">provided_grad_req_types</span> <span class="o">=</span> <span class="p">[</span><span class="n">c_str</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">grad_req</span><span class="p">]</span>
                <span class="n">provided_req_type_list_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">provided_grad_req_types</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">grad_req</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">grad_req</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">'grad_req in simple_bind cannot be an empty dict'</span><span class="p">)</span>
                <span class="n">provided_grad_req_names</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">provided_grad_req_types</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">grad_req</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">provided_grad_req_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_str</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>
                    <span class="n">provided_grad_req_types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_str</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
                <span class="n">provided_grad_req_names</span> <span class="o">=</span> <span class="n">c_array</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">,</span> <span class="n">provided_grad_req_names</span><span class="p">)</span>
                <span class="n">provided_req_type_list_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">provided_grad_req_types</span><span class="p">)</span>
            <span class="n">provided_grad_req_types</span> <span class="o">=</span> <span class="n">c_array</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">,</span> <span class="n">provided_grad_req_types</span><span class="p">)</span>

        <span class="n">num_ctx_map_keys</span> <span class="o">=</span> <span class="n">mx_uint</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">ctx_map_keys</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">)()</span>
        <span class="n">ctx_map_dev_types</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">)()</span>
        <span class="n">ctx_map_dev_ids</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">)()</span>
        <span class="k">if</span> <span class="n">group2ctx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ctx_map_keys</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">ctx_map_dev_types</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">ctx_map_dev_ids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">group2ctx</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">ctx_map_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_str</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
                <span class="n">ctx_map_dev_types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="n">val</span><span class="o">.</span><span class="n">device_typeid</span><span class="p">))</span>
                <span class="n">ctx_map_dev_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="n">val</span><span class="o">.</span><span class="n">device_id</span><span class="p">))</span>
            <span class="n">num_ctx_map_keys</span> <span class="o">=</span> <span class="n">mx_uint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ctx_map_keys</span><span class="p">))</span>
            <span class="n">ctx_map_keys</span> <span class="o">=</span> <span class="n">c_array</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">,</span> <span class="n">ctx_map_keys</span><span class="p">)</span>
            <span class="n">ctx_map_dev_types</span> <span class="o">=</span> <span class="n">c_array</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">,</span> <span class="n">ctx_map_dev_types</span><span class="p">)</span>
            <span class="n">ctx_map_dev_ids</span> <span class="o">=</span> <span class="n">c_array</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">,</span> <span class="n">ctx_map_dev_ids</span><span class="p">)</span>

        <span class="c1"># prepare param names</span>
        <span class="n">shared_arg_name_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">shared_arg_names</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">shared_arg_names</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'shared_arg_names in simple_bind must be a list or None'</span><span class="p">)</span>
            <span class="n">shared_arg_name_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">c_str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">shared_arg_names</span><span class="p">]</span>

        <span class="c1"># prepare shared_buffer</span>
        <span class="k">if</span> <span class="n">shared_buffer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">shared_buffer_len</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">shared_buffer_names</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">)()</span>
            <span class="n">shared_buffer_handles</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">NDArrayHandle</span><span class="p">)()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">shared_buffer</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'shared_buffer in simple_bind must be dict or None'</span><span class="p">)</span>
            <span class="n">shared_buffer_names</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">shared_buffer_handles</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">shared_buffer</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">shared_buffer_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_str</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>
                <span class="n">shared_buffer_handles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">handle</span><span class="p">)</span>
            <span class="n">shared_buffer_names</span> <span class="o">=</span> <span class="n">c_array</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">,</span> <span class="n">shared_buffer_names</span><span class="p">)</span>
            <span class="n">shared_buffer_len</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">shared_buffer_handles</span><span class="p">))</span>
            <span class="n">shared_buffer_handles</span> <span class="o">=</span> <span class="n">c_array</span><span class="p">(</span><span class="n">NDArrayHandle</span><span class="p">,</span> <span class="n">shared_buffer_handles</span><span class="p">)</span>
        <span class="n">updated_shared_buffer_names</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">)()</span>
        <span class="n">updated_shared_buffer_handles</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">NDArrayHandle</span><span class="p">)()</span>

        <span class="c1"># prepare shared_exec_handle</span>
        <span class="n">shared_exec_handle</span> <span class="o">=</span> <span class="n">shared_exec</span><span class="o">.</span><span class="n">handle</span> <span class="k">if</span> <span class="n">shared_exec</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">ExecutorHandle</span><span class="p">()</span>

        <span class="c1"># prepare current executor handle</span>
        <span class="n">exe_handle</span> <span class="o">=</span> <span class="n">ExecutorHandle</span><span class="p">()</span>

        <span class="c1"># prepare current executor's in_args, arg_grads, and aux_states</span>
        <span class="n">num_in_args</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_uint</span><span class="p">()</span>
        <span class="n">in_arg_handles</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">NDArrayHandle</span><span class="p">)()</span>
        <span class="n">arg_grad_handles</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">NDArrayHandle</span><span class="p">)()</span>
        <span class="n">num_aux_states</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_uint</span><span class="p">()</span>
        <span class="n">aux_state_handles</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">NDArrayHandle</span><span class="p">)()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXExecutorSimpleBind</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span>
                                                 <span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">device_typeid</span><span class="p">),</span>
                                                 <span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">device_id</span><span class="p">),</span>
                                                 <span class="n">num_ctx_map_keys</span><span class="p">,</span>
                                                 <span class="n">ctx_map_keys</span><span class="p">,</span>
                                                 <span class="n">ctx_map_dev_types</span><span class="p">,</span>
                                                 <span class="n">ctx_map_dev_ids</span><span class="p">,</span>
                                                 <span class="n">mx_uint</span><span class="p">(</span><span class="n">provided_req_type_list_len</span><span class="p">),</span>
                                                 <span class="n">provided_grad_req_names</span><span class="p">,</span>
                                                 <span class="n">provided_grad_req_types</span><span class="p">,</span>
                                                 <span class="n">mx_uint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">provided_arg_shape_names</span><span class="p">)),</span>
                                                 <span class="n">c_array</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">,</span> <span class="n">provided_arg_shape_names</span><span class="p">),</span>
                                                 <span class="n">c_array</span><span class="p">(</span><span class="n">mx_uint</span><span class="p">,</span> <span class="n">provided_arg_shape_data</span><span class="p">),</span>
                                                 <span class="n">c_array</span><span class="p">(</span><span class="n">mx_uint</span><span class="p">,</span> <span class="n">provided_arg_shape_idx</span><span class="p">),</span>
                                                 <span class="n">num_provided_arg_types</span><span class="p">,</span>
                                                 <span class="n">provided_arg_type_names</span><span class="p">,</span>
                                                 <span class="n">provided_arg_type_data</span><span class="p">,</span>
                                                 <span class="n">mx_uint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">shared_arg_name_list</span><span class="p">)),</span>
                                                 <span class="n">c_array</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">,</span> <span class="n">shared_arg_name_list</span><span class="p">),</span>
                                                 <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">shared_buffer_len</span><span class="p">),</span>
                                                 <span class="n">shared_buffer_names</span><span class="p">,</span>
                                                 <span class="n">shared_buffer_handles</span><span class="p">,</span>
                                                 <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">updated_shared_buffer_names</span><span class="p">),</span>
                                                 <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">updated_shared_buffer_handles</span><span class="p">),</span>
                                                 <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">num_in_args</span><span class="p">),</span>
                                                 <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">in_arg_handles</span><span class="p">),</span>
                                                 <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">arg_grad_handles</span><span class="p">),</span>
                                                 <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">num_aux_states</span><span class="p">),</span>
                                                 <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">aux_state_handles</span><span class="p">),</span>
                                                 <span class="n">shared_exec_handle</span><span class="p">,</span>
                                                 <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">exe_handle</span><span class="p">)))</span>
        <span class="k">except</span> <span class="n">MXNetError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">error_msg</span> <span class="o">=</span> <span class="s2">"simple_bind error. Arguments:</span><span class="se">\n</span><span class="s2">"</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">error_msg</span> <span class="o">+=</span> <span class="s2">"</span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="se">\n</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
            <span class="n">error_msg</span> <span class="o">+=</span> <span class="s2">"</span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="n">e</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>

        <span class="c1"># update shared_buffer</span>
        <span class="k">if</span> <span class="n">shared_buffer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">shared_buffer_len</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
                <span class="n">k</span> <span class="o">=</span> <span class="n">py_str</span><span class="p">(</span><span class="n">updated_shared_buffer_names</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">v</span> <span class="o">=</span> <span class="n">NDArray</span><span class="p">(</span><span class="n">NDArrayHandle</span><span class="p">(</span><span class="n">updated_shared_buffer_handles</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
                <span class="n">shared_buffer</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>

        <span class="c1"># create in_args, arg_grads, and aux_states for the current executor</span>
        <span class="n">arg_arrays</span> <span class="o">=</span> <span class="p">[</span><span class="n">NDArray</span><span class="p">(</span><span class="n">NDArrayHandle</span><span class="p">(</span><span class="n">in_arg_handles</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_in_args</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>
        <span class="n">grad_arrays</span> <span class="o">=</span> <span class="p">[</span><span class="n">NDArray</span><span class="p">(</span><span class="n">NDArrayHandle</span><span class="p">(</span><span class="n">arg_grad_handles</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
                       <span class="k">if</span> <span class="n">arg_grad_handles</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                       <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_in_args</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>
        <span class="n">aux_arrays</span> <span class="o">=</span> <span class="p">[</span><span class="n">NDArray</span><span class="p">(</span><span class="n">NDArrayHandle</span><span class="p">(</span><span class="n">aux_state_handles</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
                      <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_aux_states</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>

        <span class="n">executor</span> <span class="o">=</span> <span class="n">Executor</span><span class="p">(</span><span class="n">exe_handle</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">,</span> <span class="n">grad_req</span><span class="p">,</span> <span class="n">group2ctx</span><span class="p">)</span>
        <span class="n">executor</span><span class="o">.</span><span class="n">arg_arrays</span> <span class="o">=</span> <span class="n">arg_arrays</span>
        <span class="n">executor</span><span class="o">.</span><span class="n">grad_arrays</span> <span class="o">=</span> <span class="n">grad_arrays</span>
        <span class="n">executor</span><span class="o">.</span><span class="n">aux_arrays</span> <span class="o">=</span> <span class="n">aux_arrays</span>
        <span class="k">return</span> <span class="n">executor</span></div>

<div class="viewcode-block" id="Symbol.bind"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Symbol.bind">[docs]</a>    <span class="k">def</span> <span class="nf">bind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">args_grad</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">grad_req</span><span class="o">=</span><span class="s1">'write'</span><span class="p">,</span>
             <span class="n">aux_states</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">group2ctx</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shared_exec</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">"""Binds the current symbol to an executor and returns it.</span>

<span class="sd">        We first declare the computation and then bind to the data to run.</span>
<span class="sd">        This function returns an executor which provides method `forward()` method for evaluation</span>
<span class="sd">        and a `outputs()` method to get all the results.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> a = mx.sym.Variable('a')</span>
<span class="sd">        >>> b = mx.sym.Variable('b')</span>
<span class="sd">        >>> c = a + b</span>
<span class="sd">        <Symbol _plus1></span>
<span class="sd">        >>> ex = c.bind(ctx=mx.cpu(), args={'a' : mx.nd.ones([2,3]), 'b' : mx.nd.ones([2,3])})</span>
<span class="sd">        >>> ex.forward()</span>
<span class="sd">        [<NDArray 2x3 @cpu(0)>]</span>
<span class="sd">        >>> ex.outputs[0].asnumpy()</span>
<span class="sd">        [[ 2.  2.  2.]</span>
<span class="sd">        [ 2.  2.  2.]]</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ctx : Context</span>
<span class="sd">            The device context the generated executor to run on.</span>

<span class="sd">        args : list of NDArray or dict of str to NDArray</span>
<span class="sd">            Input arguments to the symbol.</span>

<span class="sd">            - If the input type is a list of `NDArray`, the order should be same as the order</span>
<span class="sd">              of `list_arguments()`.</span>
<span class="sd">            - If the input type is a dict of str to `NDArray`, then it maps the name of arguments</span>
<span class="sd">              to the corresponding `NDArray`.</span>
<span class="sd">            - In either case, all the arguments must be provided.</span>

<span class="sd">        args_grad : list of NDArray or dict of str to `NDArray`, optional</span>
<span class="sd">            When specified, `args_grad` provides NDArrays to hold</span>
<span class="sd">            the result of gradient value in backward.</span>

<span class="sd">            - If the input type is a list of `NDArray`, the order should be same as the order</span>
<span class="sd">              of `list_arguments()`.</span>
<span class="sd">            - If the input type is a dict of str to `NDArray`, then it maps the name of arguments</span>
<span class="sd">              to the corresponding NDArray.</span>
<span class="sd">            - When the type is a dict of str to `NDArray`, one only need to provide the dict</span>
<span class="sd">              for required argument gradient.</span>
<span class="sd">              Only the specified argument gradient will be calculated.</span>

<span class="sd">        grad_req : {'write', 'add', 'null'}, or list of str or dict of str to str, optional</span>
<span class="sd">            To specify how we should update the gradient to the `args_grad`.</span>

<span class="sd">            - 'write' means everytime gradient is write to specified `args_grad` `NDArray`.</span>
<span class="sd">            - 'add' means everytime gradient is add to the specified NDArray.</span>
<span class="sd">            - 'null' means no action is taken, the gradient may not be calculated.</span>

<span class="sd">        aux_states : list of `NDArray`, or dict of str to `NDArray`, optional</span>
<span class="sd">            Input auxiliary states to the symbol, only needed when the output of</span>
<span class="sd">            `list_auxiliary_states()` is not empty.</span>

<span class="sd">            - If the input type is a list of `NDArray`, the order should be same as the order</span>
<span class="sd">              of `list_auxiliary_states()`.</span>
<span class="sd">            - If the input type is a dict of str to `NDArray`, then it maps the name of</span>
<span class="sd">              `auxiliary_states` to the corresponding `NDArray`,</span>
<span class="sd">            - In either case, all the auxiliary states need to be provided.</span>

<span class="sd">        group2ctx : Dict of string to mx.Context</span>
<span class="sd">            The dict mapping the `ctx_group` attribute to the context assignment.</span>

<span class="sd">        shared_exec : mx.executor.Executor</span>
<span class="sd">            Executor to share memory with. This is intended for runtime reshaping, variable length</span>
<span class="sd">            sequences, etc. The returned executor shares state with `shared_exec`, and should not be</span>
<span class="sd">            used in parallel with it.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        executor : Executor</span>
<span class="sd">            The generated executor</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Auxiliary states are the special states of symbols that do not correspond</span>
<span class="sd">        to an argument, and do not have gradient but are still useful</span>
<span class="sd">        for the specific operations. Common examples of auxiliary states include</span>
<span class="sd">        the `moving_mean` and `moving_variance` states in `BatchNorm`.</span>
<span class="sd">        Most operators do not have auxiliary states and in those cases,</span>
<span class="sd">        this parameter can be safely ignored.</span>

<span class="sd">        One can give up gradient by using a dict in `args_grad` and only specify</span>
<span class="sd">        gradient they interested in.</span>
<span class="sd">        """</span>
        <span class="c1"># pylint: disable=too-many-locals, too-many-branches</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">Context</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">"Context type error"</span><span class="p">)</span>

        <span class="n">listed_arguments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_arguments</span><span class="p">()</span>
        <span class="n">args_handle</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_ndarray_inputs</span><span class="p">(</span><span class="s1">'args'</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">listed_arguments</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="c1"># setup args gradient</span>
        <span class="k">if</span> <span class="n">args_grad</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">args_grad_handle</span> <span class="o">=</span> <span class="n">c_array</span><span class="p">(</span><span class="n">NDArrayHandle</span><span class="p">,</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">args_grad_handle</span><span class="p">,</span> <span class="n">args_grad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_ndarray_inputs</span><span class="p">(</span>
                <span class="s1">'args_grad'</span><span class="p">,</span> <span class="n">args_grad</span><span class="p">,</span> <span class="n">listed_arguments</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">aux_states</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">aux_states</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">aux_args_handle</span><span class="p">,</span> <span class="n">aux_states</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_ndarray_inputs</span><span class="p">(</span>
            <span class="s1">'aux_states'</span><span class="p">,</span> <span class="n">aux_states</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_auxiliary_states</span><span class="p">(),</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1"># setup requirements</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">grad_req</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">grad_req</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_GRAD_REQ_MAP</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'grad_req must be in </span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">_GRAD_REQ_MAP</span><span class="p">))</span>
            <span class="n">reqs_array</span> <span class="o">=</span> <span class="n">c_array</span><span class="p">(</span>
                <span class="n">mx_uint</span><span class="p">,</span>
                <span class="p">[</span><span class="n">mx_uint</span><span class="p">(</span><span class="n">_GRAD_REQ_MAP</span><span class="p">[</span><span class="n">grad_req</span><span class="p">])]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">listed_arguments</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">grad_req</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">reqs_array</span> <span class="o">=</span> <span class="n">c_array</span><span class="p">(</span><span class="n">mx_uint</span><span class="p">,</span> <span class="p">[</span><span class="n">mx_uint</span><span class="p">(</span><span class="n">_GRAD_REQ_MAP</span><span class="p">[</span><span class="n">item</span><span class="p">])</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">grad_req</span><span class="p">])</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">grad_req</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">req_array</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">listed_arguments</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">grad_req</span><span class="p">:</span>
                    <span class="n">req_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mx_uint</span><span class="p">(</span><span class="n">_GRAD_REQ_MAP</span><span class="p">[</span><span class="n">grad_req</span><span class="p">[</span><span class="n">name</span><span class="p">]]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">req_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mx_uint</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
            <span class="n">reqs_array</span> <span class="o">=</span> <span class="n">c_array</span><span class="p">(</span><span class="n">mx_uint</span><span class="p">,</span> <span class="n">req_array</span><span class="p">)</span>

        <span class="n">ctx_map_keys</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ctx_map_dev_types</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ctx_map_dev_ids</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">group2ctx</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">group2ctx</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">ctx_map_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_str</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
                <span class="n">ctx_map_dev_types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="n">val</span><span class="o">.</span><span class="n">device_typeid</span><span class="p">))</span>
                <span class="n">ctx_map_dev_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="n">val</span><span class="o">.</span><span class="n">device_id</span><span class="p">))</span>

        <span class="n">handle</span> <span class="o">=</span> <span class="n">ExecutorHandle</span><span class="p">()</span>
        <span class="n">shared_handle</span> <span class="o">=</span> <span class="n">shared_exec</span><span class="o">.</span><span class="n">handle</span> <span class="k">if</span> <span class="n">shared_exec</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">ExecutorHandle</span><span class="p">()</span>
        <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXExecutorBindEX</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span>
                                         <span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">device_typeid</span><span class="p">),</span>
                                         <span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">device_id</span><span class="p">),</span>
                                         <span class="n">mx_uint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ctx_map_keys</span><span class="p">)),</span>
                                         <span class="n">c_array</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">,</span> <span class="n">ctx_map_keys</span><span class="p">),</span>
                                         <span class="n">c_array</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">,</span> <span class="n">ctx_map_dev_types</span><span class="p">),</span>
                                         <span class="n">c_array</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">,</span> <span class="n">ctx_map_dev_ids</span><span class="p">),</span>
                                         <span class="n">mx_uint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)),</span>
                                         <span class="n">args_handle</span><span class="p">,</span>
                                         <span class="n">args_grad_handle</span><span class="p">,</span>
                                         <span class="n">reqs_array</span><span class="p">,</span>
                                         <span class="n">mx_uint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">aux_states</span><span class="p">)),</span>
                                         <span class="n">aux_args_handle</span><span class="p">,</span>
                                         <span class="n">shared_handle</span><span class="p">,</span>
                                         <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">handle</span><span class="p">)))</span>
        <span class="n">executor</span> <span class="o">=</span> <span class="n">Executor</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">,</span> <span class="n">grad_req</span><span class="p">,</span> <span class="n">group2ctx</span><span class="p">)</span>
        <span class="n">executor</span><span class="o">.</span><span class="n">arg_arrays</span> <span class="o">=</span> <span class="n">args</span>
        <span class="n">executor</span><span class="o">.</span><span class="n">grad_arrays</span> <span class="o">=</span> <span class="n">args_grad</span>
        <span class="n">executor</span><span class="o">.</span><span class="n">aux_arrays</span> <span class="o">=</span> <span class="n">aux_states</span>
        <span class="k">return</span> <span class="n">executor</span></div>

<div class="viewcode-block" id="Symbol.gradient"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Symbol.gradient">[docs]</a>    <span class="k">def</span> <span class="nf">gradient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wrt</span><span class="p">):</span>
        <span class="sd">"""Gets the autodiff of current symbol.</span>

<span class="sd">        This function can only be used if current symbol is a loss function.</span>

<span class="sd">        .. note:: This function is currently not implemented.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        wrt : Array of String</span>
<span class="sd">            keyword arguments of the symbol that the gradients are taken.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        grad : Symbol</span>
<span class="sd">            A gradient Symbol with returns to be the corresponding gradients.</span>
<span class="sd">        """</span>
        <span class="n">handle</span> <span class="o">=</span> <span class="n">SymbolHandle</span><span class="p">()</span>
        <span class="n">c_wrt</span> <span class="o">=</span> <span class="n">c_array</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">,</span> <span class="p">[</span><span class="n">c_str</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">wrt</span><span class="p">])</span>
        <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolGrad</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span>
                                     <span class="n">mx_uint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">wrt</span><span class="p">)),</span>
                                     <span class="n">c_wrt</span><span class="p">,</span>
                                     <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">handle</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">Symbol</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span></div>

    <span class="c1"># pylint: enable= no-member</span>

<div class="viewcode-block" id="Symbol.eval"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Symbol.eval">[docs]</a>    <span class="k">def</span> <span class="nf">eval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""Evaluates a symbol given arguments.</span>

<span class="sd">        The `eval` method combines a call to `bind` (which returns an executor)</span>
<span class="sd">        with a call to `forward` (executor method).</span>
<span class="sd">        For the common use case, where you might repeatedly evaluate with same arguments,</span>
<span class="sd">        eval is slow.</span>
<span class="sd">        In that case, you should call `bind` once and then repeatedly call forward.</span>
<span class="sd">        This function allows simpler syntax for less cumbersome introspection.</span>

<span class="sd">        Example usage:</span>
<span class="sd">        ----------</span>
<span class="sd">        >>> a = mx.sym.Variable('a')</span>
<span class="sd">        >>> b = mx.sym.Variable('b')</span>
<span class="sd">        >>> c = a + b</span>
<span class="sd">        >>> ex = c.eval(ctx = mx.cpu(), a = mx.nd.ones([2,3]), b = mx.nd.ones([2,3]))</span>
<span class="sd">        >>> ex</span>
<span class="sd">        [<NDArray 2x3 @cpu(0)>]</span>
<span class="sd">        >>> ex[0].asnumpy()</span>
<span class="sd">        array([[ 2.,  2.,  2.],</span>
<span class="sd">               [ 2.,  2.,  2.]], dtype=float32)</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ctx : Context</span>
<span class="sd">            The device context the generated executor to run on.</span>

<span class="sd">        kwargs : Keyword arguments of type `NDArray`</span>
<span class="sd">            Input arguments to the symbol. All the arguments must be provided.</span>

<span class="sd">        Returns</span>
<span class="sd">        ----------</span>
<span class="sd">        result :  a list of NDArrays corresponding to the values taken by each symbol when</span>
<span class="sd">        evaluated on given args. When called on a single symbol (not a group),</span>
<span class="sd">        the result will be a list with one element.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">ctx</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ctx</span> <span class="o">=</span> <span class="n">Context</span><span class="o">.</span><span class="n">default_ctx</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span></div>

<div class="viewcode-block" id="Symbol.reshape"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Symbol.reshape">[docs]</a>    <span class="k">def</span> <span class="nf">reshape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shape</span><span class="p">):</span>
        <span class="sd">"""Shorthand for mxnet.sym.reshape.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        shape : tuple of int</span>
<span class="sd">            The new shape should not change the array size, namely</span>
<span class="sd">            ``np.prod(new_shape)`` should be equal to ``np.prod(self.shape)``.</span>
<span class="sd">            One shape dimension can be -1. In this case, the value is inferred</span>
<span class="sd">            from the length of the array and remaining dimensions.</span>


<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Symbol</span>
<span class="sd">            A reshaped symbol.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="n">shape</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">wait_to_read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">NotImplementedForSymbol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wait_to_read</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">asnumpy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">NotImplementedForSymbol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">asscalar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">NotImplementedForSymbol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">asscalar</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">astype</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">NotImplementedForSymbol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">astype</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">NotImplementedForSymbol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">as_in_context</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">NotImplementedForSymbol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">as_in_context</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">detach</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">NotImplementedForSymbol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">detach</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">backward</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">NotImplementedForSymbol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">backward</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="var"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.var">[docs]</a><span class="k">def</span> <span class="nf">var</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lr_mult</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wd_mult</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""Creates a symbolic variable with specified name.</span>

<span class="sd">    Example usage:</span>
<span class="sd">    ----------</span>
<span class="sd">    >>> data = mx.sym.Variable('data', attr={'a': 'b'})</span>
<span class="sd">    >>> data</span>
<span class="sd">    <Symbol data></span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    name : str</span>
<span class="sd">        Variable name.</span>
<span class="sd">    attr : Dict of strings</span>
<span class="sd">        Additional attributes to set on the variable. Format {string : string}.</span>
<span class="sd">    shape : tuple</span>
<span class="sd">        The shape of a variable. If specified, this will be used during the shape inference.</span>
<span class="sd">        If one has specified a different shape for this variable using</span>
<span class="sd">        a keyword argument when calling shape inference, this shape information will be ignored.</span>
<span class="sd">    lr_mult : float</span>
<span class="sd">        The learning rate multiplier for input variable.</span>
<span class="sd">    wd_mult : float</span>
<span class="sd">        Weight decay multiplier for input variable.</span>
<span class="sd">    dtype : str or numpy.dtype</span>
<span class="sd">        The dtype for input variable. If not specified, this value will be inferred.</span>
<span class="sd">    init : initializer (mxnet.init.*)</span>
<span class="sd">        Initializer for this variable to (optionally) override the default initializer.</span>
<span class="sd">    kwargs : Additional attribute variables</span>
<span class="sd">        Additional attributes must start and end with double underscores.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    variable : Symbol</span>
<span class="sd">        A symbol corresponding to an input to the computation graph.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'Expect a string for variable `name`'</span><span class="p">)</span>
    <span class="n">handle</span> <span class="o">=</span> <span class="n">SymbolHandle</span><span class="p">()</span>
    <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolCreateVariable</span><span class="p">(</span><span class="n">c_str</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">handle</span><span class="p">)))</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
    <span class="n">attr</span> <span class="o">=</span> <span class="n">AttrScope</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
    <span class="n">attr</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">attr</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">attr</span>
    <span class="k">if</span> <span class="n">shape</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">attr</span><span class="p">[</span><span class="s1">'__shape__'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">lr_mult</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">attr</span><span class="p">[</span><span class="s1">'__lr_mult__'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">lr_mult</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">wd_mult</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">attr</span><span class="p">[</span><span class="s1">'__wd_mult__'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">wd_mult</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">dtype</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">attr</span><span class="p">[</span><span class="s1">'__dtype__'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">_DTYPE_NP_TO_MX</span><span class="p">[</span><span class="n">_numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span><span class="o">.</span><span class="n">type</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">init</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">init</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
            <span class="n">init</span> <span class="o">=</span> <span class="n">init</span><span class="o">.</span><span class="n">dumps</span><span class="p">()</span>
        <span class="n">attr</span><span class="p">[</span><span class="s1">'__init__'</span><span class="p">]</span> <span class="o">=</span> <span class="n">init</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'__'</span><span class="p">)</span> <span class="ow">and</span> <span class="n">k</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'__'</span><span class="p">):</span>
            <span class="n">attr</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'Attribute name=</span><span class="si">%s</span><span class="s1"> is not supported.'</span>
                             <span class="s1">' Additional attributes must start and end with double underscores,'</span>
                             <span class="s1">' e.g, __yourattr__'</span> <span class="o">%</span> <span class="n">k</span><span class="p">)</span>
    <span class="n">ret</span><span class="o">.</span><span class="n">_set_attr</span><span class="p">(</span><span class="o">**</span><span class="n">attr</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ret</span></div>


<span class="c1"># for back compatibility</span>
<span class="n">Variable</span> <span class="o">=</span> <span class="n">var</span>


<div class="viewcode-block" id="Group"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.Group">[docs]</a><span class="k">def</span> <span class="nf">Group</span><span class="p">(</span><span class="n">symbols</span><span class="p">):</span>
    <span class="sd">"""Creates a symbol that contains a collection of other symbols, grouped together.</span>

<span class="sd">    Example usage:</span>
<span class="sd">    ----------</span>
<span class="sd">    >>> a = mx.sym.Variable('a')</span>
<span class="sd">    >>> b = mx.sym.Variable('b')</span>
<span class="sd">    >>> mx.sym.Group([a,b])</span>
<span class="sd">    <Symbol Grouped></span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    symbols : list</span>
<span class="sd">        List of symbols to be grouped.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    sym : Symbol</span>
<span class="sd">        A group symbol.</span>
<span class="sd">     """</span>
    <span class="n">ihandles</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">sym</span> <span class="ow">in</span> <span class="n">symbols</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sym</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'Expected a list of symbols as input'</span><span class="p">)</span>
        <span class="n">ihandles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sym</span><span class="o">.</span><span class="n">handle</span><span class="p">)</span>
    <span class="n">handle</span> <span class="o">=</span> <span class="n">SymbolHandle</span><span class="p">()</span>
    <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolCreateGroup</span><span class="p">(</span>
        <span class="n">mx_uint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ihandles</span><span class="p">)),</span>
        <span class="n">c_array</span><span class="p">(</span><span class="n">SymbolHandle</span><span class="p">,</span> <span class="n">ihandles</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">handle</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">Symbol</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span></div>


<div class="viewcode-block" id="load"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.load">[docs]</a><span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="n">fname</span><span class="p">):</span>
    <span class="sd">"""Loads symbol from a JSON file.</span>

<span class="sd">    You can also use pickle to do the job if you only work on python.</span>
<span class="sd">    The advantage of load/save is the file is language agnostic.</span>
<span class="sd">    This means the file saved using save can be loaded by other language binding of mxnet.</span>
<span class="sd">    You also get the benefit being able to directly load/save from cloud storage(S3, HDFS).</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    fname : str</span>
<span class="sd">        The name of the file, examples:</span>

<span class="sd">        - `s3://my-bucket/path/my-s3-symbol`</span>
<span class="sd">        - `hdfs://my-bucket/path/my-hdfs-symbol`</span>
<span class="sd">        - `/path-to/my-local-symbol`</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    sym : Symbol</span>
<span class="sd">        The loaded symbol.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    Symbol.save : Used to save symbol into file.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'fname need to be string'</span><span class="p">)</span>
    <span class="n">handle</span> <span class="o">=</span> <span class="n">SymbolHandle</span><span class="p">()</span>
    <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolCreateFromFile</span><span class="p">(</span><span class="n">c_str</span><span class="p">(</span><span class="n">fname</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">handle</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">Symbol</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span></div>


<div class="viewcode-block" id="load_json"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.load_json">[docs]</a><span class="k">def</span> <span class="nf">load_json</span><span class="p">(</span><span class="n">json_str</span><span class="p">):</span>
    <span class="sd">"""Loads symbol from json string.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    json_str : str</span>
<span class="sd">        A JSON string.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    sym : Symbol</span>
<span class="sd">        The loaded symbol.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    Symbol.tojson : Used to save symbol into json string.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">json_str</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'fname required to be string'</span><span class="p">)</span>
    <span class="n">handle</span> <span class="o">=</span> <span class="n">SymbolHandle</span><span class="p">()</span>
    <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolCreateFromJSON</span><span class="p">(</span><span class="n">c_str</span><span class="p">(</span><span class="n">json_str</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">handle</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">Symbol</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span></div>


<span class="c1"># pylint: disable=no-member</span>
<span class="c1"># pylint: disable=redefined-builtin</span>
<div class="viewcode-block" id="pow"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.pow">[docs]</a><span class="k">def</span> <span class="nf">pow</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">exp</span><span class="p">):</span>
    <span class="sd">"""Returns element-wise result of base element raised to powers from exp element.</span>

<span class="sd">    Both inputs can be Symbol or scalar number.</span>
<span class="sd">    Broadcasting is not supported. Use `broadcast_pow` instead.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ---------</span>
<span class="sd">    base : Symbol or scalar</span>
<span class="sd">        The base symbol</span>
<span class="sd">    exp : Symbol or scalar</span>
<span class="sd">        The exponent symbol</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Symbol or scalar</span>
<span class="sd">        The bases in x raised to the exponents in y.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    >>> mx.sym.pow(2, 3)</span>
<span class="sd">    8</span>
<span class="sd">    >>> x = mx.sym.Variable('x')</span>
<span class="sd">    >>> y = mx.sym.Variable('y')</span>
<span class="sd">    >>> z = mx.sym.pow(x, 2)</span>
<span class="sd">    >>> z.eval(x=mx.nd.array([1,2]))[0].asnumpy()</span>
<span class="sd">    array([ 1.,  4.], dtype=float32)</span>
<span class="sd">    >>> z = mx.sym.pow(3, y)</span>
<span class="sd">    >>> z.eval(y=mx.nd.array([2,3]))[0].asnumpy()</span>
<span class="sd">    array([  9.,  27.], dtype=float32)</span>
<span class="sd">    >>> z = mx.sym.pow(x, y)</span>
<span class="sd">    >>> z.eval(x=mx.nd.array([3,4]), y=mx.nd.array([2,3]))[0].asnumpy()</span>
<span class="sd">    array([  9.,  64.], dtype=float32)</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exp</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_Power</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exp</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_PowerScalar</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">exp</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">Number</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exp</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_RPowerScalar</span><span class="p">(</span><span class="n">exp</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">base</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">Number</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exp</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">base</span><span class="o">**</span><span class="n">exp</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'types (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">) not supported'</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">base</span><span class="p">)),</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">exp</span><span class="p">))))</span></div>


<span class="c1"># pylint: disable=no-member</span>
<span class="c1"># pylint: disable=redefined-builtin</span>
<div class="viewcode-block" id="maximum"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.maximum">[docs]</a><span class="k">def</span> <span class="nf">maximum</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
    <span class="sd">"""Returns element-wise maximum of the input elements.</span>

<span class="sd">    Both inputs can be Symbol or scalar number. Broadcasting is not supported.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ---------</span>
<span class="sd">    left : Symbol or scalar</span>
<span class="sd">        First symbol to be compared.</span>
<span class="sd">    right : Symbol or scalar</span>
<span class="sd">        Second symbol to be compared.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Symbol or scalar</span>
<span class="sd">        The element-wise maximum of the input symbols.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    >>> mx.sym.maximum(2, 3.5)</span>
<span class="sd">    3.5</span>
<span class="sd">    >>> x = mx.sym.Variable('x')</span>
<span class="sd">    >>> y = mx.sym.Variable('y')</span>
<span class="sd">    >>> z = mx.sym.maximum(x, 4)</span>
<span class="sd">    >>> z.eval(x=mx.nd.array([3,5,2,10]))[0].asnumpy()</span>
<span class="sd">    array([  4.,   5.,   4.,  10.], dtype=float32)</span>
<span class="sd">    >>> z = mx.sym.maximum(x, y)</span>
<span class="sd">    >>> z.eval(x=mx.nd.array([3,4]), y=mx.nd.array([10,2]))[0].asnumpy()</span>
<span class="sd">    array([ 10.,   4.], dtype=float32)</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_Maximum</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_MaximumScalar</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">right</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">Number</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_MaximumScalar</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">left</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">Number</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">left</span> <span class="k">if</span> <span class="n">left</span> <span class="o">></span> <span class="n">right</span> <span class="k">else</span> <span class="n">right</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'types (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">) not supported'</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">left</span><span class="p">)),</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">right</span><span class="p">))))</span></div>


<span class="c1"># pylint: disable=no-member</span>
<span class="c1"># pylint: disable=redefined-builtin</span>
<div class="viewcode-block" id="minimum"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.minimum">[docs]</a><span class="k">def</span> <span class="nf">minimum</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
    <span class="sd">"""Returns element-wise minimum of the input elements.</span>

<span class="sd">    Both inputs can be Symbol or scalar number. Broadcasting is not supported.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ---------</span>
<span class="sd">    left : Symbol or scalar</span>
<span class="sd">        First symbol to be compared.</span>
<span class="sd">    right : Symbol or scalar</span>
<span class="sd">        Second symbol to be compared.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Symbol or scalar</span>
<span class="sd">        The element-wise minimum of the input symbols.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    >>> mx.sym.minimum(2, 3.5)</span>
<span class="sd">    2</span>
<span class="sd">    >>> x = mx.sym.Variable('x')</span>
<span class="sd">    >>> y = mx.sym.Variable('y')</span>
<span class="sd">    >>> z = mx.sym.minimum(x, 4)</span>
<span class="sd">    >>> z.eval(x=mx.nd.array([3,5,2,10]))[0].asnumpy()</span>
<span class="sd">    array([ 3.,  4.,  2.,  4.], dtype=float32)</span>
<span class="sd">    >>> z = mx.sym.minimum(x, y)</span>
<span class="sd">    >>> z.eval(x=mx.nd.array([3,4]), y=mx.nd.array([10,2]))[0].asnumpy()</span>
<span class="sd">    array([ 3.,  2.], dtype=float32)</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_Minimum</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_MinimumScalar</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">right</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">Number</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_MinimumScalar</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">left</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">Number</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">left</span> <span class="k">if</span> <span class="n">left</span> <span class="o"><</span> <span class="n">right</span> <span class="k">else</span> <span class="n">right</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'types (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">) not supported'</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">left</span><span class="p">)),</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">right</span><span class="p">))))</span></div>


<span class="c1"># pylint: disable=no-member</span>
<span class="c1"># pylint: disable=redefined-builtin</span>
<div class="viewcode-block" id="hypot"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.hypot">[docs]</a><span class="k">def</span> <span class="nf">hypot</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
    <span class="sd">"""Given the "legs" of a right triangle, returns its hypotenuse.</span>

<span class="sd">    Equivalent to :math:`\\sqrt(left^2 + right^2)`, element-wise.</span>
<span class="sd">    Both inputs can be Symbol or scalar number. Broadcasting is not supported.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ---------</span>
<span class="sd">    left : Symbol or scalar</span>
<span class="sd">        First leg of the triangle(s).</span>
<span class="sd">    right : Symbol or scalar</span>
<span class="sd">        Second leg of the triangle(s).</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Symbol or scalar</span>
<span class="sd">        The hypotenuse of the triangle(s)</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    >>> mx.sym.hypot(3, 4)</span>
<span class="sd">    5.0</span>
<span class="sd">    >>> x = mx.sym.Variable('x')</span>
<span class="sd">    >>> y = mx.sym.Variable('y')</span>
<span class="sd">    >>> z = mx.sym.hypot(x, 4)</span>
<span class="sd">    >>> z.eval(x=mx.nd.array([3,5,2]))[0].asnumpy()</span>
<span class="sd">    array([ 5.,  6.40312433,  4.47213602], dtype=float32)</span>
<span class="sd">    >>> z = mx.sym.hypot(x, y)</span>
<span class="sd">    >>> z.eval(x=mx.nd.array([3,4]), y=mx.nd.array([10,2]))[0].asnumpy()</span>
<span class="sd">    array([ 10.44030666,   4.47213602], dtype=float32)</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_Hypot</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_HypotScalar</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">right</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">Number</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">Symbol</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_HypotScalar</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">scalar</span><span class="o">=</span><span class="n">left</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">Number</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_numpy</span><span class="o">.</span><span class="n">hypot</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'types (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">) not supported'</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">left</span><span class="p">)),</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">right</span><span class="p">))))</span></div>


<div class="viewcode-block" id="zeros"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.zeros">[docs]</a><span class="k">def</span> <span class="nf">zeros</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""Returns a new symbol of given shape and type, filled with zeros.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    shape :  int or sequence of ints</span>
<span class="sd">        Shape of the new array.</span>
<span class="sd">    dtype : str or numpy.dtype, optional</span>
<span class="sd">        The value type of the inner value, default to ``np.float32``.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    out : Symbol</span>
<span class="sd">        The created Symbol.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">dtype</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="n">_numpy</span><span class="o">.</span><span class="n">float32</span>
    <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="ones"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.ones">[docs]</a><span class="k">def</span> <span class="nf">ones</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""Returns a new symbol of given shape and type, filled with ones.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    shape :  int or sequence of ints</span>
<span class="sd">        Shape of the new array.</span>
<span class="sd">    dtype : str or numpy.dtype, optional</span>
<span class="sd">        The value type of the inner value, default to ``np.float32``.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    out : Symbol</span>
<span class="sd">        The created Symbol</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">dtype</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="n">_numpy</span><span class="o">.</span><span class="n">float32</span>
    <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_ones</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="full"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.full">[docs]</a><span class="k">def</span> <span class="nf">full</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""Returns a new array of given shape and type, filled with the given value `val`.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    shape :  int or sequence of ints</span>
<span class="sd">        Shape of the new array.</span>
<span class="sd">    val : scalar</span>
<span class="sd">        Fill value.</span>
<span class="sd">    dtype : str or numpy.dtype, optional</span>
<span class="sd">        The value type of the inner value, default to ``np.float32``.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    out : Symbol</span>
<span class="sd">        The created Symbol</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">dtype</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="n">_numpy</span><span class="o">.</span><span class="n">float32</span>
    <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_MulScalar</span><span class="p">(</span><span class="n">ones</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">),</span> <span class="n">scalar</span><span class="o">=</span><span class="n">val</span><span class="p">)</span></div>


<div class="viewcode-block" id="arange"><a class="viewcode-back" href="../../api/python/symbol.html#mxnet.symbol.arange">[docs]</a><span class="k">def</span> <span class="nf">arange</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">repeat</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Returns evenly spaced values within a given interval.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    start : number</span>
<span class="sd">        Start of interval. The interval includes this value. The default start value is 0.</span>
<span class="sd">    stop : number, optional</span>
<span class="sd">        End of interval. The interval does not include this value.</span>
<span class="sd">    step : number, optional</span>
<span class="sd">        Spacing between values.</span>
<span class="sd">    repeat : int, optional</span>
<span class="sd">        "The repeating time of all elements.</span>
<span class="sd">        E.g repeat=3, the element a will be repeated three times --> a, a, a.</span>
<span class="sd">    dtype : str or numpy.dtype, optional</span>
<span class="sd">        The value type of the inner value, default to ``np.float32``.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    out : Symbol</span>
<span class="sd">        The created Symbol</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">dtype</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="n">_numpy</span><span class="o">.</span><span class="n">float32</span>
    <span class="k">return</span> <span class="n">_internal</span><span class="o">.</span><span class="n">_arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="n">stop</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="n">step</span><span class="p">,</span> <span class="n">repeat</span><span class="o">=</span><span class="n">repeat</span><span class="p">,</span>
                             <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span></div>


<span class="k">def</span> <span class="nf">_make_atomic_symbol_function</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="sd">"""Create an atomic symbol function by handle and function name."""</span>
    <span class="n">real_name</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">()</span>
    <span class="n">desc</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">()</span>
    <span class="n">num_args</span> <span class="o">=</span> <span class="n">mx_uint</span><span class="p">()</span>
    <span class="n">arg_names</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">)()</span>
    <span class="n">arg_types</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">)()</span>
    <span class="n">arg_descs</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">)()</span>
    <span class="n">key_var_num_args</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">()</span>
    <span class="n">ret_type</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">()</span>

    <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXSymbolGetAtomicSymbolInfo</span><span class="p">(</span>
        <span class="n">handle</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">real_name</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">desc</span><span class="p">),</span>
        <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">num_args</span><span class="p">),</span>
        <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">arg_names</span><span class="p">),</span>
        <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">arg_types</span><span class="p">),</span>
        <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">arg_descs</span><span class="p">),</span>
        <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">key_var_num_args</span><span class="p">),</span>
        <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">ret_type</span><span class="p">)))</span>
    <span class="n">narg</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_args</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="n">arg_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">py_str</span><span class="p">(</span><span class="n">arg_names</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">narg</span><span class="p">)]</span>
    <span class="n">arg_types</span> <span class="o">=</span> <span class="p">[</span><span class="n">py_str</span><span class="p">(</span><span class="n">arg_types</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">narg</span><span class="p">)]</span>
    <span class="n">func_name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="n">key_var_num_args</span> <span class="o">=</span> <span class="n">py_str</span><span class="p">(</span><span class="n">key_var_num_args</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="n">ret_type</span> <span class="o">=</span> <span class="n">py_str</span><span class="p">(</span><span class="n">ret_type</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="n">ret_type</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s1">''</span>
    <span class="n">doc_str</span> <span class="o">=</span> <span class="n">_build_doc</span><span class="p">(</span><span class="n">func_name</span><span class="p">,</span>
                         <span class="n">py_str</span><span class="p">(</span><span class="n">desc</span><span class="o">.</span><span class="n">value</span><span class="p">),</span>
                         <span class="n">arg_names</span><span class="p">,</span>
                         <span class="n">arg_types</span><span class="p">,</span>
                         <span class="p">[</span><span class="n">py_str</span><span class="p">(</span><span class="n">arg_descs</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">narg</span><span class="p">)],</span>
                         <span class="n">key_var_num_args</span><span class="p">,</span>
                         <span class="n">ret_type</span><span class="p">)</span>

    <span class="n">dtype_name</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">arr_name</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">ndsignature</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">ndarg_names</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">kwarg_names</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">narg</span><span class="p">):</span>
        <span class="n">name</span><span class="p">,</span> <span class="n">atype</span> <span class="o">=</span> <span class="n">arg_names</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">arg_types</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">'dtype'</span><span class="p">:</span>
            <span class="n">dtype_name</span> <span class="o">=</span> <span class="n">name</span>
            <span class="n">signature</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'</span><span class="si">%s</span><span class="s1">=_Null'</span><span class="o">%</span><span class="n">name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">atype</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'NDArray'</span><span class="p">)</span> <span class="ow">or</span> <span class="n">atype</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'Symbol'</span><span class="p">):</span>
            <span class="k">assert</span> <span class="ow">not</span> <span class="n">arr_name</span><span class="p">,</span> \
                <span class="s2">"Op can only have one argument with variable "</span> \
                <span class="s2">"size and it must be the last argument."</span>
            <span class="k">if</span> <span class="n">atype</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'[]'</span><span class="p">):</span>
                <span class="n">ndsignature</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'*</span><span class="si">%s</span><span class="s1">'</span><span class="o">%</span><span class="n">name</span><span class="p">)</span>
                <span class="n">arr_name</span> <span class="o">=</span> <span class="n">name</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ndsignature</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'</span><span class="si">%s</span><span class="s1">=None'</span><span class="o">%</span><span class="n">name</span><span class="p">)</span>
                <span class="n">ndarg_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">signature</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'</span><span class="si">%s</span><span class="s1">=_Null'</span><span class="o">%</span><span class="n">name</span><span class="p">)</span>
            <span class="n">kwarg_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="c1">#signature.append('is_train=False')</span>
    <span class="n">signature</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'name=None'</span><span class="p">)</span>
    <span class="n">signature</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'attr=None'</span><span class="p">)</span>
    <span class="n">signature</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'out=None'</span><span class="p">)</span>
    <span class="n">signature</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'**kwargs'</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">ndsignature</span> <span class="o">+</span> <span class="n">signature</span>

    <span class="n">code</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">arr_name</span><span class="p">:</span>
        <span class="n">code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"""</span>
<span class="s2">def </span><span class="si">%s</span><span class="s2">(*</span><span class="si">%s</span><span class="s2">, **kwargs):"""</span><span class="o">%</span><span class="p">(</span><span class="n">func_name</span><span class="p">,</span> <span class="n">arr_name</span><span class="p">))</span>
        <span class="n">code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"""</span>
<span class="s2">    sym_args = []</span>
<span class="s2">    for i in </span><span class="si">{}</span><span class="s2">:</span>
<span class="s2">        assert isinstance(i, SymbolBase), </span><span class="se">\\</span><span class="s2"></span>
<span class="s2">            "Positional arguments must be Symbol instances, " </span><span class="se">\\</span><span class="s2"></span>
<span class="s2">            "but got </span><span class="si">%s</span><span class="s2">"</span><span class="si">%s</span><span class="s2">tr(i)</span>
<span class="s2">        sym_args.append(i)"""</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">arr_name</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">dtype_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"""</span>
<span class="s2">    if '</span><span class="si">%s</span><span class="s2">' in kwargs:</span>
<span class="s2">        kwargs['</span><span class="si">%s</span><span class="s2">'] = _numpy.dtype(kwargs['</span><span class="si">%s</span><span class="s2">']).name"""</span><span class="o">%</span><span class="p">(</span>
            <span class="n">dtype_name</span><span class="p">,</span> <span class="n">dtype_name</span><span class="p">,</span> <span class="n">dtype_name</span><span class="p">))</span>
        <span class="n">code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"""</span>
<span class="s2">    attr = kwargs.pop('attr', None)</span>
<span class="s2">    kwargs.update(AttrScope.current.get(attr))</span>
<span class="s2">    name = kwargs.pop('name', None)</span>
<span class="s2">    name = NameManager.current.get(name, '</span><span class="si">%s</span><span class="s2">')</span>
<span class="s2">    _ = kwargs.pop('out', None)</span>
<span class="s2">    keys = []</span>
<span class="s2">    vals = []</span>
<span class="s2">    sym_kwargs = dict()</span>
<span class="s2">    for k, v in kwargs.items():</span>
<span class="s2">        if isinstance(v, SymbolBase):</span>
<span class="s2">            sym_kwargs[k] = v</span>
<span class="s2">        else:</span>
<span class="s2">            keys.append(k)</span>
<span class="s2">            vals.append(v)"""</span><span class="o">%</span><span class="p">(</span><span class="n">func_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()))</span>
        <span class="k">if</span> <span class="n">key_var_num_args</span><span class="p">:</span>
            <span class="n">code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"""</span>
<span class="s2">    if '</span><span class="si">%s</span><span class="s2">' not in kwargs:</span>
<span class="s2">        keys.append('</span><span class="si">%s</span><span class="s2">')</span>
<span class="s2">        vals.append(len(sym_args) + len(sym_kwargs))"""</span><span class="o">%</span><span class="p">(</span>
            <span class="n">key_var_num_args</span><span class="p">,</span> <span class="n">key_var_num_args</span><span class="p">))</span>

        <span class="n">code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"""</span>
<span class="s2">    return _symbol_creator(</span><span class="si">%d</span><span class="s2">, sym_args, sym_kwargs, keys, vals, name)"""</span><span class="o">%</span><span class="p">(</span>
        <span class="n">handle</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"""</span>
<span class="s2">def </span><span class="si">%s</span><span class="s2">(</span><span class="si">%s</span><span class="s2">):</span>
<span class="s2">    kwargs.update(AttrScope.current.get(attr))</span>
<span class="s2">    sym_kwargs = dict()</span>
<span class="s2">    keys = []</span>
<span class="s2">    vals = []"""</span><span class="o">%</span><span class="p">(</span><span class="n">func_name</span><span class="p">,</span> <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">signature</span><span class="p">)))</span>
        <span class="n">code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"""</span>
<span class="s2">    for k, v in kwargs.items():</span>
<span class="s2">        if isinstance(v, SymbolBase):</span>
<span class="s2">            sym_kwargs[k] = v</span>
<span class="s2">        else:</span>
<span class="s2">            keys.append(k)</span>
<span class="s2">            vals.append(v)"""</span><span class="p">)</span>
        <span class="c1"># NDArray args</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">ndarg_names</span><span class="p">:</span> <span class="c1"># pylint: disable=redefined-argument-from-local</span>
            <span class="n">code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"""</span>
<span class="s2">    if </span><span class="si">{name}</span><span class="s2"> is not None:</span>
<span class="s2">        assert isinstance(</span><span class="si">{name}</span><span class="s2">, SymbolBase), </span><span class="se">\\</span><span class="s2"></span>
<span class="s2">            "Argument </span><span class="si">{name}</span><span class="s2"> must be Symbol instances, but got </span><span class="si">%s</span><span class="s2">"</span><span class="si">%s</span><span class="s2">tr(</span><span class="si">{name}</span><span class="s2">)</span>
<span class="s2">        sym_kwargs['</span><span class="si">{name}</span><span class="s2">'] = </span><span class="si">{name}</span><span class="s2">"""</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">))</span>
        <span class="c1"># kwargs</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">kwarg_names</span><span class="p">:</span> <span class="c1"># pylint: disable=redefined-argument-from-local</span>
            <span class="n">code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"""</span>
<span class="s2">    if </span><span class="si">%s</span><span class="s2"> is not _Null:</span>
<span class="s2">        keys.append('</span><span class="si">%s</span><span class="s2">')</span>
<span class="s2">        vals.append(</span><span class="si">%s</span><span class="s2">)"""</span><span class="o">%</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
        <span class="c1"># dtype</span>
        <span class="k">if</span> <span class="n">dtype_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"""</span>
<span class="s2">    if </span><span class="si">%s</span><span class="s2"> is not _Null:</span>
<span class="s2">        keys.append('</span><span class="si">%s</span><span class="s2">')</span>
<span class="s2">        vals.append(_numpy.dtype(</span><span class="si">%s</span><span class="s2">).name)"""</span><span class="o">%</span><span class="p">(</span><span class="n">dtype_name</span><span class="p">,</span> <span class="n">dtype_name</span><span class="p">,</span> <span class="n">dtype_name</span><span class="p">))</span>

        <span class="n">code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"""</span>
<span class="s2">    name = NameManager.current.get(name, '</span><span class="si">%s</span><span class="s2">')</span>
<span class="s2">    return _symbol_creator(</span><span class="si">%d</span><span class="s2">, None, sym_kwargs, keys, vals, name)"""</span><span class="o">%</span><span class="p">(</span>
        <span class="n">func_name</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">handle</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>

    <span class="n">local</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">''</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">code</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="n">local</span><span class="p">)</span>  <span class="c1"># pylint: disable=exec-used</span>
    <span class="n">symbol_function</span> <span class="o">=</span> <span class="n">local</span><span class="p">[</span><span class="n">func_name</span><span class="p">]</span>
    <span class="n">symbol_function</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="n">func_name</span>
    <span class="n">symbol_function</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">doc_str</span>
    <span class="n">symbol_function</span><span class="o">.</span><span class="vm">__module__</span> <span class="o">=</span> <span class="s1">'mxnet.symbol'</span>
    <span class="k">return</span> <span class="n">symbol_function</span>


<span class="k">def</span> <span class="nf">_init_symbol_module</span><span class="p">(</span><span class="n">symbol_class</span><span class="p">,</span> <span class="n">root_namespace</span><span class="p">):</span>
    <span class="sd">"""List and add all the atomic symbol functions to current module."""</span>
    <span class="n">_set_symbol_class</span><span class="p">(</span><span class="n">symbol_class</span><span class="p">)</span>
    <span class="n">plist</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">)()</span>
    <span class="n">size</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_uint</span><span class="p">()</span>

    <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">MXListAllOpNames</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">size</span><span class="p">),</span>
                                     <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">plist</span><span class="p">)))</span>
    <span class="n">op_names</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
        <span class="n">op_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">py_str</span><span class="p">(</span><span class="n">plist</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>

    <span class="n">module_obj</span> <span class="o">=</span> <span class="n">_sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="s2">"</span><span class="si">%s</span><span class="s2">.symbol"</span> <span class="o">%</span> <span class="n">root_namespace</span><span class="p">]</span>
    <span class="n">module_internal</span> <span class="o">=</span> <span class="n">_sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="s2">"</span><span class="si">%s</span><span class="s2">._symbol_internal"</span> <span class="o">%</span> <span class="n">root_namespace</span><span class="p">]</span>
    <span class="n">module_contrib</span> <span class="o">=</span> <span class="n">_sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="s2">"</span><span class="si">%s</span><span class="s2">.contrib.symbol"</span> <span class="o">%</span> <span class="n">root_namespace</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">op_names</span><span class="p">:</span>
        <span class="n">hdl</span> <span class="o">=</span> <span class="n">OpHandle</span><span class="p">()</span>
        <span class="n">check_call</span><span class="p">(</span><span class="n">_LIB</span><span class="o">.</span><span class="n">NNGetOpHandle</span><span class="p">(</span><span class="n">c_str</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">hdl</span><span class="p">)))</span>
        <span class="n">function</span> <span class="o">=</span> <span class="n">_make_atomic_symbol_function</span><span class="p">(</span><span class="n">hdl</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">function</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'_contrib_'</span><span class="p">):</span>
            <span class="n">function</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span><span class="vm">__name__</span><span class="p">[</span><span class="mi">9</span><span class="p">:]</span>
            <span class="n">function</span><span class="o">.</span><span class="vm">__module__</span> <span class="o">=</span> <span class="s1">'mxnet.contrib.symbol'</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">module_contrib</span><span class="p">,</span> <span class="n">function</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">function</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">function</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'_'</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">module_internal</span><span class="p">,</span> <span class="n">function</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">function</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">module_obj</span><span class="p">,</span> <span class="n">function</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">function</span><span class="p">)</span>


<span class="c1"># Initialize the atomic symbol in startups</span>
<span class="n">_init_symbol_module</span><span class="p">(</span><span class="n">Symbol</span><span class="p">,</span> <span class="s2">"mxnet"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div aria-label="main navigation" class="sphinxsidebar rightsidebar" role="navigation">
<div class="sphinxsidebarwrapper">
</div>
</div>
</div><div class="footer">
<div class="section-disclaimer">
<div class="container">
<div>
<img height="60" src="https://raw.githubusercontent.com/dmlc/web-data/master/mxnet/image/apache_incubator_logo.png"/>
<p>
            Apache MXNet is an effort undergoing incubation at The Apache Software Foundation (ASF), <strong>sponsored by the <i>Apache Incubator</i></strong>. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.
        </p>
<p>
            "Copyright © 2017-2018, The Apache Software Foundation
            Apache MXNet, MXNet, Apache, the Apache feather, and the Apache MXNet project logo are either registered trademarks or trademarks of the Apache Software Foundation."
        </p>
</div>
</div>
</div>
</div> <!-- pagename != index -->
</div>
<script crossorigin="anonymous" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="../../_static/js/sidebar.js" type="text/javascript"></script>
<script src="../../_static/js/search.js" type="text/javascript"></script>
<script src="../../_static/js/navbar.js" type="text/javascript"></script>
<script src="../../_static/js/clipboard.min.js" type="text/javascript"></script>
<script src="../../_static/js/copycode.js" type="text/javascript"></script>
<script src="../../_static/js/page.js" type="text/javascript"></script>
<script src="../../_static/js/docversion.js" type="text/javascript"></script>
<script type="text/javascript">
        $('body').ready(function () {
            $('body').css('visibility', 'visible');
        });
    </script>
</body>
</html>