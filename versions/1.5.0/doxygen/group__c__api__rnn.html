<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/xhtml;charset=utf-8" http-equiv="Content-Type"/>
<meta content="IE=9" http-equiv="X-UA-Compatible"/>
<meta content="Doxygen 1.8.11" name="generator"/>
<title>mxnet: RNN</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script src="jquery.js" type="text/javascript"></script>
<script src="dynsections.js" type="text/javascript"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script src="search/searchdata.js" type="text/javascript"></script>
<script src="search/search.js" type="text/javascript"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellpadding="0" cellspacing="0">
<tbody>
<tr style="height: 56px;">
<td id="projectalign" style="padding-left: 0.5em;">
<div id="projectname">mxnet
   </div>
</td>
</tr>
</tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<div class="tabs" id="navrow1">
<ul class="tablist">
<li><a href="index.html"><span>Main Page</span></a></li>
<li><a href="pages.html"><span>Related Pages</span></a></li>
<li class="current"><a href="modules.html"><span>Modules</span></a></li>
<li><a href="namespaces.html"><span>Namespaces</span></a></li>
<li><a href="annotated.html"><span>Classes</span></a></li>
<li><a href="files.html"><span>Files</span></a></li>
<li>
<div class="MSearchBoxInactive" id="MSearchBox">
<span class="left">
<img alt="" id="MSearchSelect" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()" src="search/mag_sel.png"/>
<input accesskey="S" id="MSearchField" onblur="searchBox.OnSearchFieldFocus(false)" onfocus="searchBox.OnSearchFieldFocus(true)" onkeyup="searchBox.OnSearchFieldChange(event)" type="text" value="Search"/>
</span><span class="right">
<a href="javascript:searchBox.CloseResultsWindow()" id="MSearchClose"><img alt="" border="0" id="MSearchCloseImg" src="search/close.png"/></a>
</span>
</div>
</li>
</ul>
</div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow" onkeydown="return searchBox.OnSearchSelectKey(event)" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()">
</div>
<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe frameborder="0" id="MSearchResults" name="MSearchResults" src="javascript:void(0)">
</iframe>
</div>
<div class="header">
<div class="summary">
<a href="#func-members">Functions</a> </div>
<div class="headertitle">
<div class="title">RNN<div class="ingroups"><a class="el" href="group__c__api.html">C API</a> » <a class="el" href="group__c__api__primitive.html">Primitive operations</a></div></div> </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for RNN:</div>
<div class="dyncontent">
<center><table><tr><td><img alt="" border="0" src="group__c__api__rnn.png" usemap="#group____c____api____rnn"/>
<map id="group____c____api____rnn" name="group____c____api____rnn">
<area alt="" coords="5,5,155,32" href="group__c__api__primitive.html" id="node1" shape="rect" title="Primitive operations"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga9f7ffb1f6f362bbe5975700c916b6a7e"><td align="right" class="memItemLeft" valign="top"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> <a class="el" href="mkldnn_8h.html#a14804afce5364c7a515f82d21c6b64f0">MKLDNN_API</a> </td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__api__rnn.html#ga9f7ffb1f6f362bbe5975700c916b6a7e">mkldnn_rnn_cell_desc_init</a> (<a class="el" href="structmkldnn__rnn__cell__desc__t.html">mkldnn_rnn_cell_desc_t</a> *rnn_cell_desc, <a class="el" href="group__c__api__types__generic.html#gaa27d43cdd1e439cc41a9580d23ce3e97">mkldnn_alg_kind_t</a> kind, <a class="el" href="group__c__api__types__generic.html#gaa27d43cdd1e439cc41a9580d23ce3e97">mkldnn_alg_kind_t</a> f, unsigned int flags, float alpha, float clipping)</td></tr>
<tr class="separator:ga9f7ffb1f6f362bbe5975700c916b6a7e"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:gaaa19b8f0624d36b2c0197ec547190e75"><td align="right" class="memItemLeft" valign="top">int <a class="el" href="mkldnn_8h.html#a14804afce5364c7a515f82d21c6b64f0">MKLDNN_API</a> </td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__api__rnn.html#gaaa19b8f0624d36b2c0197ec547190e75">mkldnn_rnn_cell_get_gates_count</a> (const <a class="el" href="structmkldnn__rnn__cell__desc__t.html">mkldnn_rnn_cell_desc_t</a> *rnn_cell_desc)</td></tr>
<tr class="separator:gaaa19b8f0624d36b2c0197ec547190e75"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:ga5282631e9fb6733f40a1cc180825954d"><td align="right" class="memItemLeft" valign="top">int <a class="el" href="mkldnn_8h.html#a14804afce5364c7a515f82d21c6b64f0">MKLDNN_API</a> </td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__api__rnn.html#ga5282631e9fb6733f40a1cc180825954d">mkldnn_rnn_cell_get_states_count</a> (const <a class="el" href="structmkldnn__rnn__cell__desc__t.html">mkldnn_rnn_cell_desc_t</a> *rnn_cell_desc)</td></tr>
<tr class="separator:ga5282631e9fb6733f40a1cc180825954d"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:gae4f871b413573f905f0995e1ee52c1df"><td align="right" class="memItemLeft" valign="top"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> <a class="el" href="mkldnn_8h.html#a14804afce5364c7a515f82d21c6b64f0">MKLDNN_API</a> </td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__api__rnn.html#gae4f871b413573f905f0995e1ee52c1df">mkldnn_primitive_attr_set_rnn_data_qparams</a> (<a class="el" href="group__c__api__primitive__attr.html#gaeaf9bd515118e1667f7fd1846bb79de1">mkldnn_primitive_attr_t</a> attr, const float scale, const float shift)</td></tr>
<tr class="separator:gae4f871b413573f905f0995e1ee52c1df"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:ga8b553d5f5e81fc095c75ba021a59daa9"><td align="right" class="memItemLeft" valign="top"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> <a class="el" href="mkldnn_8h.html#a14804afce5364c7a515f82d21c6b64f0">MKLDNN_API</a> </td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__api__rnn.html#ga8b553d5f5e81fc095c75ba021a59daa9">mkldnn_primitive_attr_set_rnn_weights_qparams</a> (<a class="el" href="group__c__api__primitive__attr.html#gaeaf9bd515118e1667f7fd1846bb79de1">mkldnn_primitive_attr_t</a> attr, int count, int mask, const float *weights_scales)</td></tr>
<tr class="separator:ga8b553d5f5e81fc095c75ba021a59daa9"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:ga5bfe35f13beaa9c90d3e5841d18e07d8"><td align="right" class="memItemLeft" valign="top"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> <a class="el" href="mkldnn_8h.html#a14804afce5364c7a515f82d21c6b64f0">MKLDNN_API</a> </td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__api__rnn.html#ga5bfe35f13beaa9c90d3e5841d18e07d8">mkldnn_rnn_forward_desc_init</a> (<a class="el" href="structmkldnn__rnn__desc__t.html">mkldnn_rnn_desc_t</a> *rnn_desc, <a class="el" href="group__c__api__types__generic.html#ga5b98c8059c2aff8861157bf070c3f520">mkldnn_prop_kind_t</a> prop_kind, const <a class="el" href="structmkldnn__rnn__cell__desc__t.html">mkldnn_rnn_cell_desc_t</a> *rnn_cell_desc, const <a class="el" href="group__c__api__types__memory.html#ga3cb09316c36bd985698e0eea542cb424">mkldnn_rnn_direction_t</a> direction, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *src_layer_desc, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *src_iter_desc, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *weights_layer_desc, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *weights_iter_desc, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *bias_desc, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *dst_layer_desc, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *dst_iter_desc)</td></tr>
<tr class="separator:ga5bfe35f13beaa9c90d3e5841d18e07d8"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:ga4f0dbc9d0a8e2b71ad366cf86b7a2cba"><td align="right" class="memItemLeft" valign="top"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> <a class="el" href="mkldnn_8h.html#a14804afce5364c7a515f82d21c6b64f0">MKLDNN_API</a> </td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__api__rnn.html#ga4f0dbc9d0a8e2b71ad366cf86b7a2cba">mkldnn_rnn_backward_desc_init</a> (<a class="el" href="structmkldnn__rnn__desc__t.html">mkldnn_rnn_desc_t</a> *rnn_desc, <a class="el" href="group__c__api__types__generic.html#ga5b98c8059c2aff8861157bf070c3f520">mkldnn_prop_kind_t</a> prop_kind, const <a class="el" href="structmkldnn__rnn__cell__desc__t.html">mkldnn_rnn_cell_desc_t</a> *rnn_cell_desc, const <a class="el" href="group__c__api__types__memory.html#ga3cb09316c36bd985698e0eea542cb424">mkldnn_rnn_direction_t</a> direction, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *src_layer_desc, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *src_iter_desc, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *weights_layer_desc, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *weights_iter_desc, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *bias_desc, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *dst_layer_desc, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *dst_iter_desc, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *diff_src_layer_desc, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *diff_src_iter_desc, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *diff_weights_layer_desc, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *diff_weights_iter_desc, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *diff_bias_desc, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *diff_dst_layer, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *diff_dst_iter_desc)</td></tr>
<tr class="separator:ga4f0dbc9d0a8e2b71ad366cf86b7a2cba"><td class="memSeparator" colspan="2"> </td></tr>
</table>
<a id="details" name="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>A primitive to compute the common recurrent layer. </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>add additional description for the group </dd></dl>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gae4f871b413573f905f0995e1ee52c1df"></a>
<div class="memitem">
<div class="memproto">
<table class="memname">
<tr>
<td class="memname"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> <a class="el" href="mkldnn_8h.html#a14804afce5364c7a515f82d21c6b64f0">MKLDNN_API</a> mkldnn_primitive_attr_set_rnn_data_qparams </td>
<td>(</td>
<td class="paramtype"><a class="el" href="group__c__api__primitive__attr.html#gaeaf9bd515118e1667f7fd1846bb79de1">mkldnn_primitive_attr_t</a> </td>
<td class="paramname"><em>attr</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const float </td>
<td class="paramname"><em>scale</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const float </td>
<td class="paramname"><em>shift</em> </td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td><td></td>
</tr>
</table>
</div><div class="memdoc">
<p>Sets quantization <code>scale</code> and <code>shift</code> for RNN data tensors. For performance reasons, low precision configuration of RNN primitive expects input activations to have unsigned int8 data type. Scale and shift used to quantize floating point data to unsigned integer must be passed to RNN primitive using attributes. Example usage: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span> // rnn parameters</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span> int l = 2, t = 2, mb = 32, sic = 32, slc = 32, dic = 32, dlc = 32;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span> // activations quantization parameters</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span> float scale = ..., shift = ..;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span> </div><div class="line"><a name="l00006"></a><span class="lineno">    6</span> mkldnn_primitive_attr_t rnn_attr;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span> // create default attributes</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span> mkldnn_primitive_attr_create(&amp;rnn_attr);</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span> </div><div class="line"><a name="l00010"></a><span class="lineno">   10</span> // set scale and shift for int8 quantization of activation</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span> mkldnn_primitive_attr_set_rnn_data_qparams(rnn_attr, scale, shift);</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span> </div><div class="line"><a name="l00013"></a><span class="lineno">   13</span> // create &amp; configure rnn op_desc</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span> mkldnn_rnn_desc_t rnn_d;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span> mkldnn_primitive_desc_t rnn_pd;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span> mkldnn_primitive_desc_create_v2(&amp;rnn_pd, &amp;rnn_d, attr, NULL);</div></div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>Quantization scale and shift are common for src_layer, src_iter, dst_iter and dst_layer. </dd></dl>
</div>
</div>
<a class="anchor" id="ga8b553d5f5e81fc095c75ba021a59daa9"></a>
<div class="memitem">
<div class="memproto">
<table class="memname">
<tr>
<td class="memname"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> <a class="el" href="mkldnn_8h.html#a14804afce5364c7a515f82d21c6b64f0">MKLDNN_API</a> mkldnn_primitive_attr_set_rnn_weights_qparams </td>
<td>(</td>
<td class="paramtype"><a class="el" href="group__c__api__primitive__attr.html#gaeaf9bd515118e1667f7fd1846bb79de1">mkldnn_primitive_attr_t</a> </td>
<td class="paramname"><em>attr</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">int </td>
<td class="paramname"><em>count</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">int </td>
<td class="paramname"><em>mask</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const float * </td>
<td class="paramname"><em>weights_scales</em> </td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td><td></td>
</tr>
</table>
</div><div class="memdoc">
<p>Sets quantization scales <code>weights_scales</code> for RNN weights tensors. Low precision configuration of RNN primitive expects input weights to have signed int8 data type. Scales used to quantize floating point data to signed integer must be passed to RNN primitive using attributes. The <code>mask</code> argument defines correspondence between output tensor dimensions and the <code>weights_scales</code> array. Set i-th bit of <code>mask</code> to 1 to use dedicated scaling factor for each slice of the output tensor over i-th dimension. Set <code>mask</code> to 0 to use common scaling factor for the whole output tensor. Example usage: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span> // rnn parameters</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span> int l = 2, t = 2, mb = 32, sic = 32, slc = 32, dic = 32, dlc = 32;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span> // unique output scales per output channel</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span> float weights_scales[dic * n_gates] = { ... };</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span> // mask that specifies last two dimensions of ldigo format</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span> int mask = 0x3;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span> </div><div class="line"><a name="l00008"></a><span class="lineno">    8</span> mkldnn_primitive_attr_t attr;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span> // create default attributes</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span> mkldnn_primitive_attr_create(&amp;attr);</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span> </div><div class="line"><a name="l00012"></a><span class="lineno">   12</span> // set output channel-wise weights scales</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span> mkldnn_primitive_attr_set_rnn_weights_qparams(attr, dic * n_gates, mask,</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>         weights_scales);</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span> </div><div class="line"><a name="l00016"></a><span class="lineno">   16</span> // create &amp; configure rnn op_desc</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span> mkldnn_rnn_desc_t rnn_d;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span> mkldnn_primitive_desc_t rnn_pd;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span> mkldnn_primitive_desc_create_v2(&amp;rnn_pd, &amp;rnn_d, attr, NULL);</div></div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>The dimension order is always native and does not depend on the actual layout used. For example, 5 dimensional weights always have (l, d, i, g, o) logical dimension ordering. </dd>
<dd>
Quantization sales are common for weights_layer and weights_iteration </dd>
<dd>
There is no way to check that <code>count</code> corresponds to <code>mask</code> until an actual primitive descriptor is created, so it is user's responsibility to set proper values. The following formula must be held:</dd></dl>
<p class="formulaDsp">
<img alt="\[count = \prod\limits_{d \in mask} output.dims[d]\]" class="formulaDsp" src="form_0.png"/>
</p>
</div>
</div>
<a class="anchor" id="ga4f0dbc9d0a8e2b71ad366cf86b7a2cba"></a>
<div class="memitem">
<div class="memproto">
<table class="memname">
<tr>
<td class="memname"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> <a class="el" href="mkldnn_8h.html#a14804afce5364c7a515f82d21c6b64f0">MKLDNN_API</a> mkldnn_rnn_backward_desc_init </td>
<td>(</td>
<td class="paramtype"><a class="el" href="structmkldnn__rnn__desc__t.html">mkldnn_rnn_desc_t</a> * </td>
<td class="paramname"><em>rnn_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype"><a class="el" href="group__c__api__types__generic.html#ga5b98c8059c2aff8861157bf070c3f520">mkldnn_prop_kind_t</a> </td>
<td class="paramname"><em>prop_kind</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__rnn__cell__desc__t.html">mkldnn_rnn_cell_desc_t</a> * </td>
<td class="paramname"><em>rnn_cell_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="group__c__api__types__memory.html#ga3cb09316c36bd985698e0eea542cb424">mkldnn_rnn_direction_t</a> </td>
<td class="paramname"><em>direction</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> * </td>
<td class="paramname"><em>src_layer_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> * </td>
<td class="paramname"><em>src_iter_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> * </td>
<td class="paramname"><em>weights_layer_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> * </td>
<td class="paramname"><em>weights_iter_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> * </td>
<td class="paramname"><em>bias_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> * </td>
<td class="paramname"><em>dst_layer_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> * </td>
<td class="paramname"><em>dst_iter_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> * </td>
<td class="paramname"><em>diff_src_layer_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> * </td>
<td class="paramname"><em>diff_src_iter_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> * </td>
<td class="paramname"><em>diff_weights_layer_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> * </td>
<td class="paramname"><em>diff_weights_iter_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> * </td>
<td class="paramname"><em>diff_bias_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> * </td>
<td class="paramname"><em>diff_dst_layer</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> * </td>
<td class="paramname"><em>diff_dst_iter_desc</em> </td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td><td></td>
</tr>
</table>
</div><div class="memdoc">
<p>Initializes a rnn descriptor <code>rnn_desc</code> for backward propagation using <code>prop_kind</code>, <code>rnn_cell_desc</code>, <code>direction</code>, and memory descriptors. </p><dl class="section note"><dt>Note</dt><dd>All memory descriptors are allowed to be initialized with <a class="el" href="group__c__api__types__generic.html#gga30a390f87ef74bf03dfa48a7b3f2fb74a5ae7d369fcd51464f613e51d73eae547">mkldnn_any</a> value of <code>format_kind</code>.</dd></dl>
<p><code>src_iter_desc</code> (simultaneously with <code>diff_src_iter_desc</code>), <code>bias_desc</code> (simultaneously with <code>diff_bias_desc</code>), and <code>dst_iter_desc</code> (simultaneously with <code>diff_src_iter_desc</code>) are allowed to either be <code>NULL</code> or point to a zero memory descriptor, which would indicate that the RNN primitive should not use them.</p>
<p>Order of inputs:</p><ul>
<li>src_layer (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9ac17b645e3801adaaeee3107103ec8a72">mkldnn_query_src_pd</a>, 0)</li>
<li>src_iter (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9ac17b645e3801adaaeee3107103ec8a72">mkldnn_query_src_pd</a>, 1), if used</li>
<li>weights_layer (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9aad24a528aa4e68a27da4b23063eb76ee">mkldnn_query_weights_pd</a>, 0)</li>
<li>weights_iter (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9aad24a528aa4e68a27da4b23063eb76ee">mkldnn_query_weights_pd</a>, 1)</li>
<li>bias (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9aad24a528aa4e68a27da4b23063eb76ee">mkldnn_query_weights_pd</a>, 2), if used</li>
<li>dst_layer (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9abb15fa8a7eb5aebfe547ac57a96c2d56">mkldnn_query_dst_pd</a>, 0)</li>
<li>dst_iter (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9abb15fa8a7eb5aebfe547ac57a96c2d56">mkldnn_query_dst_pd</a>, 1), if used</li>
<li>diff_dst_layer (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9aa5b466fae3a9bda2d112db68cfd2b68e">mkldnn_query_diff_dst_pd</a>, 0)</li>
<li>diff_dst_iter (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9aa5b466fae3a9bda2d112db68cfd2b68e">mkldnn_query_diff_dst_pd</a>, 1), if used</li>
<li>workspace (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9ad18aadd1899c151835c624d7b83edb56">mkldnn_query_workspace_pd</a>, 0)</li>
</ul>
<p>Order of outputs:</p><ul>
<li>diff_src_layer (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9ac95fbe152e97a3989dc794a70643d834">mkldnn_query_diff_src_pd</a>, 0)</li>
<li>diff_src_iter (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9ac95fbe152e97a3989dc794a70643d834">mkldnn_query_diff_src_pd</a>, 1), if used</li>
<li>diff_weights_layer (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9ab43b4c2b7a151bc59bddffc009abae66">mkldnn_query_diff_weights_pd</a>, 0)</li>
<li>diff_weights_iter (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9ab43b4c2b7a151bc59bddffc009abae66">mkldnn_query_diff_weights_pd</a>, 1)</li>
<li>diff_bias (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9ab43b4c2b7a151bc59bddffc009abae66">mkldnn_query_diff_weights_pd</a>, 2), if used </li>
</ul>
</div>
</div>
<a class="anchor" id="ga9f7ffb1f6f362bbe5975700c916b6a7e"></a>
<div class="memitem">
<div class="memproto">
<table class="memname">
<tr>
<td class="memname"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> <a class="el" href="mkldnn_8h.html#a14804afce5364c7a515f82d21c6b64f0">MKLDNN_API</a> mkldnn_rnn_cell_desc_init </td>
<td>(</td>
<td class="paramtype"><a class="el" href="structmkldnn__rnn__cell__desc__t.html">mkldnn_rnn_cell_desc_t</a> * </td>
<td class="paramname"><em>rnn_cell_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype"><a class="el" href="group__c__api__types__generic.html#gaa27d43cdd1e439cc41a9580d23ce3e97">mkldnn_alg_kind_t</a> </td>
<td class="paramname"><em>kind</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype"><a class="el" href="group__c__api__types__generic.html#gaa27d43cdd1e439cc41a9580d23ce3e97">mkldnn_alg_kind_t</a> </td>
<td class="paramname"><em>f</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">unsigned int </td>
<td class="paramname"><em>flags</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">float </td>
<td class="paramname"><em>alpha</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">float </td>
<td class="paramname"><em>clipping</em> </td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td><td></td>
</tr>
</table>
</div><div class="memdoc">
<p>Initializes a recurrent cell descriptor <code>rnn_cell_desc</code> using <code>rnn_cell_desc</code>, <code>kind</code> (possible values are <a class="el" href="group__c__api__types__generic.html#ggaa27d43cdd1e439cc41a9580d23ce3e97a1f61363b51f29e33a64b4670e7f3a488">mkldnn_vanilla_rnn</a>, <a class="el" href="group__c__api__types__generic.html#ggaa27d43cdd1e439cc41a9580d23ce3e97a456ac674f7f3d7ac0d3e71bc82b832d6">mkldnn_vanilla_lstm</a>, <a class="el" href="group__c__api__types__generic.html#ggaa27d43cdd1e439cc41a9580d23ce3e97ab0c8902b2a48f9e27389d1a459f38d7d">mkldnn_vanilla_gru</a>, and <a class="el" href="group__c__api__types__generic.html#ggaa27d43cdd1e439cc41a9580d23ce3e97a2cf2ea0c4089de4eaf331fac2bd6f1a0">mkldnn_gru_linear_before_reset</a>), <code>f</code> (possible values are <a class="el" href="group__c__api__types__generic.html#ggaa27d43cdd1e439cc41a9580d23ce3e97a66ead6848424f0b494e813745efb5548">mkldnn_eltwise_relu</a> and <a class="el" href="group__c__api__types__generic.html#ggaa27d43cdd1e439cc41a9580d23ce3e97a6b50624e847783bfc94b7cf6badfa16c">mkldnn_eltwise_tanh</a>), <code>flags</code>, <code>alpha</code>, and <code>clipping</code>. </p>
</div>
</div>
<a class="anchor" id="gaaa19b8f0624d36b2c0197ec547190e75"></a>
<div class="memitem">
<div class="memproto">
<table class="memname">
<tr>
<td class="memname">int <a class="el" href="mkldnn_8h.html#a14804afce5364c7a515f82d21c6b64f0">MKLDNN_API</a> mkldnn_rnn_cell_get_gates_count </td>
<td>(</td>
<td class="paramtype">const <a class="el" href="structmkldnn__rnn__cell__desc__t.html">mkldnn_rnn_cell_desc_t</a> * </td>
<td class="paramname"><em>rnn_cell_desc</em></td><td>)</td>
<td></td>
</tr>
</table>
</div><div class="memdoc">
<p>Returns the number of gates of a particular <code>rnn_cell_desc</code>. </p>
</div>
</div>
<a class="anchor" id="ga5282631e9fb6733f40a1cc180825954d"></a>
<div class="memitem">
<div class="memproto">
<table class="memname">
<tr>
<td class="memname">int <a class="el" href="mkldnn_8h.html#a14804afce5364c7a515f82d21c6b64f0">MKLDNN_API</a> mkldnn_rnn_cell_get_states_count </td>
<td>(</td>
<td class="paramtype">const <a class="el" href="structmkldnn__rnn__cell__desc__t.html">mkldnn_rnn_cell_desc_t</a> * </td>
<td class="paramname"><em>rnn_cell_desc</em></td><td>)</td>
<td></td>
</tr>
</table>
</div><div class="memdoc">
<p>Returns the number of states of a particular <code>rnn_cell_desc</code>. </p>
</div>
</div>
<a class="anchor" id="ga5bfe35f13beaa9c90d3e5841d18e07d8"></a>
<div class="memitem">
<div class="memproto">
<table class="memname">
<tr>
<td class="memname"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> <a class="el" href="mkldnn_8h.html#a14804afce5364c7a515f82d21c6b64f0">MKLDNN_API</a> mkldnn_rnn_forward_desc_init </td>
<td>(</td>
<td class="paramtype"><a class="el" href="structmkldnn__rnn__desc__t.html">mkldnn_rnn_desc_t</a> * </td>
<td class="paramname"><em>rnn_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype"><a class="el" href="group__c__api__types__generic.html#ga5b98c8059c2aff8861157bf070c3f520">mkldnn_prop_kind_t</a> </td>
<td class="paramname"><em>prop_kind</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__rnn__cell__desc__t.html">mkldnn_rnn_cell_desc_t</a> * </td>
<td class="paramname"><em>rnn_cell_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="group__c__api__types__memory.html#ga3cb09316c36bd985698e0eea542cb424">mkldnn_rnn_direction_t</a> </td>
<td class="paramname"><em>direction</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> * </td>
<td class="paramname"><em>src_layer_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> * </td>
<td class="paramname"><em>src_iter_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> * </td>
<td class="paramname"><em>weights_layer_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> * </td>
<td class="paramname"><em>weights_iter_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> * </td>
<td class="paramname"><em>bias_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> * </td>
<td class="paramname"><em>dst_layer_desc</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> * </td>
<td class="paramname"><em>dst_iter_desc</em> </td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td><td></td>
</tr>
</table>
</div><div class="memdoc">
<p>Initializes a rnn descriptor <code>rnn_desc</code> for forward propagation using <code>prop_kind</code>, <code>rnn_cell_desc</code>, <code>direction</code>, and memory descriptors. </p><dl class="section note"><dt>Note</dt><dd>If <code>prop_kind</code> equals <a class="el" href="group__c__api__types__generic.html#gga5b98c8059c2aff8861157bf070c3f520a0bb8fb5a8f3ae67cf8d9c8d13667507f">mkldnn_forward_training</a>, you must query a workspace memory descriptor before creating the primitive.</dd></dl>
<p><code>src_iter_desc</code>, <code>bias_desc</code>, and <code>dst_iter_desc</code> are allowed to either be <code>NULL</code> or point to a zero memory descriptor, which would indicate that the RNN primitive should not use them.</p>
<dl class="section note"><dt>Note</dt><dd>All memory descriptors except <code>src_iter_desc</code> are allowed to be initialized with <a class="el" href="group__c__api__types__generic.html#gga30a390f87ef74bf03dfa48a7b3f2fb74a5ae7d369fcd51464f613e51d73eae547">mkldnn_any</a> value of <code>format_kind</code>.</dd></dl>
<p>Order of inputs:</p><ul>
<li>src_layer (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9ac17b645e3801adaaeee3107103ec8a72">mkldnn_query_src_pd</a>, 0)</li>
<li>src_iter (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9ac17b645e3801adaaeee3107103ec8a72">mkldnn_query_src_pd</a>, 1), if used</li>
<li>weights_layer (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9aad24a528aa4e68a27da4b23063eb76ee">mkldnn_query_weights_pd</a>, 0)</li>
<li>weights_iter (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9aad24a528aa4e68a27da4b23063eb76ee">mkldnn_query_weights_pd</a>, 1)</li>
<li>bias (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9aad24a528aa4e68a27da4b23063eb76ee">mkldnn_query_weights_pd</a>, 2), if used</li>
</ul>
<p>Order of outputs:</p><ul>
<li>dst_layer (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9abb15fa8a7eb5aebfe547ac57a96c2d56">mkldnn_query_dst_pd</a>, 0)</li>
<li>dst_iter (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9abb15fa8a7eb5aebfe547ac57a96c2d56">mkldnn_query_dst_pd</a>, 1), if used</li>
<li>workspace (<a class="el" href="group__c__api__types__query.html#gga6eebc661a8a3437b49d9c677f8972fc9ad18aadd1899c151835c624d7b83edb56">mkldnn_query_workspace_pd</a>, 0), if <code>prop_kind</code> equals <a class="el" href="group__c__api__types__generic.html#gga5b98c8059c2aff8861157bf070c3f520a0bb8fb5a8f3ae67cf8d9c8d13667507f">mkldnn_forward_training</a> </li>
</ul>
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Sep 19 2019 12:25:12 for mxnet by  <a href="http://www.doxygen.org/index.html">
<img alt="doxygen" class="footer" src="doxygen.png"/>
</a> 1.8.11
</small></address>
</body>
</html>
